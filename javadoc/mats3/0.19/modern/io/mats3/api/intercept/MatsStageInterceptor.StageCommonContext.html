<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>MatsStageInterceptor.StageCommonContext (mats3 0.19.9-2023-05-04 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: io.mats3.api.intercept, interface: MatsStageInterceptor, interface: StageCommonContext">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">io.mats3.api.intercept</a></div>
<h1 title="Interface MatsStageInterceptor.StageCommonContext" class="title">Interface MatsStageInterceptor.StageCommonContext</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Superinterfaces:</dt>
<dd><code><a href="MatsStageInterceptor.StageInterceptContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StageInterceptContext</a></code></dd>
</dl>
<dl class="notes">
<dt>All Known Subinterfaces:</dt>
<dd><code><a href="MatsStageInterceptor.StageCompletedContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StageCompletedContext</a></code>, <code><a href="MatsStageInterceptor.StageInterceptOutgoingMessageContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StageInterceptOutgoingMessageContext</a></code>, <code><a href="MatsStageInterceptor.StageInterceptUserLambdaContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StageInterceptUserLambdaContext</a></code>, <code><a href="MatsStageInterceptor.StageReceivedContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StageReceivedContext</a></code></dd>
</dl>
<dl class="notes">
<dt>Enclosing interface:</dt>
<dd><a href="MatsStageInterceptor.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor</a></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public static interface </span><span class="element-name type-name-label">MatsStageInterceptor.StageCommonContext</span><span class="extends-implements">
extends <a href="MatsStageInterceptor.StageInterceptContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StageInterceptContext</a></span></div>
<div class="block">Common context elements for stage interception, including all the incoming message/envelope data and metadata.
 <p/>
 <b>Remember: There are also lots of properties on the ProcessContext!</b></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab5" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab5', 3)" class="table-tab">Default Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getDataAndStateDeserializationNanos()" class="member-name-link">getDataAndStateDeserializationNanos</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getDataSerializedSize()" class="member-name-link">getDataSerializedSize</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Instant.html" title="class or interface in java.time" class="external-link">Instant</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getEndpointEnteredTimestamp()" class="member-name-link">getEndpointEnteredTimestamp</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns the timestamp when the initial stage of the Endpoint which this Stage belongs to, was entered.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getEnvelopeDecompressionNanos()" class="member-name-link">getEnvelopeDecompressionNanos</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getEnvelopeDeserializationNanos()" class="member-name-link">getEnvelopeDeserializationNanos</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getEnvelopeSerializedSize()" class="member-name-link">getEnvelopeSerializedSize</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getEnvelopeWireSize()" class="member-name-link">getEnvelopeWireSize</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getIncomingData()" class="member-name-link">getIncomingData</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="MatsOutgoingMessage.MessageType.html" title="enum class in io.mats3.api.intercept">MatsOutgoingMessage.MessageType</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getIncomingMessageType()" class="member-name-link">getIncomingMessageType</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>&lt;T&gt;&nbsp;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;T&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getIncomingSameStackHeightExtraState(java.lang.String,java.lang.Class)" class="member-name-link">getIncomingSameStackHeightExtraState</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;key,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;T&gt;&nbsp;type)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getIncomingState()" class="member-name-link">getIncomingState</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>&lt;T&gt;&nbsp;T</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getInterceptContextAttribute(java.lang.String)" class="member-name-link">getInterceptContextAttribute</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;key)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getMessageSystemDeconstructNanos()" class="member-name-link">getMessageSystemDeconstructNanos</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#getMessageSystemTotalWireSize()" class="member-name-link">getMessageSystemTotalWireSize</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Instant.html" title="class or interface in java.time" class="external-link">Instant</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getPrecedingSameStackHeightOutgoingTimestamp()" class="member-name-link">getPrecedingSameStackHeightOutgoingTimestamp</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns the timestamp of the preceding outgoing message <i>on the same stack height</i> as this stage.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="../../MatsEndpoint.DetachedProcessContext.html" title="interface in io.mats3">MatsEndpoint.DetachedProcessContext</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getProcessContext()" class="member-name-link">getProcessContext</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getStateSerializedSize()" class="member-name-link">getStateSerializedSize</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getTotalPreprocessAndDeserializeNanos()" class="member-name-link">getTotalPreprocessAndDeserializeNanos</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#putInterceptContextAttribute(java.lang.String,java.lang.Object)" class="member-name-link">putInterceptContextAttribute</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;key,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;value)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Set an attribute on this particular interception, which is shared between the different stages of
 interception, and also between all interceptors - use some namespacing to avoid accidental collisions.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-io.mats3.api.intercept.MatsStageInterceptor.StageInterceptContext">Methods inherited from interface&nbsp;io.mats3.api.intercept.<a href="MatsStageInterceptor.StageInterceptContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StageInterceptContext</a></h3>
<code><a href="MatsStageInterceptor.StageInterceptContext.html#getStage()">getStage</a>, <a href="MatsStageInterceptor.StageInterceptContext.html#getStartedInstant()">getStartedInstant</a>, <a href="MatsStageInterceptor.StageInterceptContext.html#getStartedNanoTime()">getStartedNanoTime</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="putInterceptContextAttribute(java.lang.String,java.lang.Object)">
<h3>putInterceptContextAttribute</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">putInterceptContextAttribute</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;key,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;value)</span></div>
<div class="block">Set an attribute on this particular interception, which is shared between the different stages of
 interception, and also between all interceptors - use some namespacing to avoid accidental collisions. Use
 instead of ThreadLocals.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>key</code> - the key name for this intercept context attribute.</dd>
<dd><code>value</code> - the value which should be held.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getInterceptContextAttribute(java.lang.String)">
<h3>getInterceptContextAttribute</h3>
<div class="member-signature"><span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type">T</span>&nbsp;<span class="element-name">getInterceptContextAttribute</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;key)</span></div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the type of this attribute, to avoid explicit casting - but you should really know the type,
            otherwise request <code>Object</code>.</dd>
<dt>Parameters:</dt>
<dd><code>key</code> - the key name for this intercept context attribute.</dd>
<dt>Returns:</dt>
<dd>the intercept context attribute that was stored by
         <a href="#putInterceptContextAttribute(java.lang.String,java.lang.Object)"><code>putInterceptContextAttribute(String, Object)</code></a>, <code>null</code> if there is no such value.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getProcessContext()">
<h3>getProcessContext</h3>
<div class="member-signature"><span class="return-type"><a href="../../MatsEndpoint.DetachedProcessContext.html" title="interface in io.mats3">MatsEndpoint.DetachedProcessContext</a></span>&nbsp;<span class="element-name">getProcessContext</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the <a href="../../MatsEndpoint.DetachedProcessContext.html" title="interface in io.mats3"><code>MatsEndpoint.DetachedProcessContext</code></a> for the executing stage - this is overridden in several sub
         interfaces to return the actual "live" <a href="../../MatsEndpoint.ProcessContext.html" title="interface in io.mats3"><code>MatsEndpoint.ProcessContext</code></a>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getEndpointEnteredTimestamp()">
<h3>getEndpointEnteredTimestamp</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Instant.html" title="class or interface in java.time" class="external-link">Instant</a></span>&nbsp;<span class="element-name">getEndpointEnteredTimestamp</span>()</div>
<div class="block">Returns the timestamp when the initial stage of the Endpoint which this Stage belongs to, was entered. Use to
 calculate <i>total endpoint time</i>: If the result of a stage is <a href="MatsStageInterceptor.StageCompletedContext.ProcessResult.html#REPLY"><code>MatsStageInterceptor.StageCompletedContext.ProcessResult.REPLY</code></a> or
 <a href="MatsStageInterceptor.StageCompletedContext.ProcessResult.html#NONE"><code>MatsStageInterceptor.StageCompletedContext.ProcessResult.NONE</code></a>, then the endpoint is finished, and the current time vs. endpoint entered
 timestamp (this method) is the total time this endpoint used.
 <p/>
 <b>Note that this is susceptible to time skews between nodes: If the initial stage was run on node A, while
 this stage is run on node B, calculations on the timestamp returned from this method (from node A) vs. this
 node (B's) <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/System.html#currentTimeMillis()" title="class or interface in java.lang" class="external-link"><code>System.currentTimeMillis()</code></a> is highly dependent on the time synchronization between node A
 and node B.</b></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the timestamp when the initial stage of the Endpoint which this Stage belongs to, was entered.</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="#getPrecedingSameStackHeightOutgoingTimestamp()"><code>getPrecedingSameStackHeightOutgoingTimestamp()</code></a></li>
<li><a href="../../MatsEndpoint.DetachedProcessContext.html#getFromTimestamp()"><code>MatsEndpoint.DetachedProcessContext.getFromTimestamp()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getPrecedingSameStackHeightOutgoingTimestamp()">
<h3>getPrecedingSameStackHeightOutgoingTimestamp</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Instant.html" title="class or interface in java.time" class="external-link">Instant</a></span>&nbsp;<span class="element-name">getPrecedingSameStackHeightOutgoingTimestamp</span>()</div>
<div class="block">Returns the timestamp of the preceding outgoing message <i>on the same stack height</i> as this stage. Use to
 calculate "Time since previous Stage of same Endpoint", which includes queue times and processing times of
 requested endpoints happening in between the send and the receive, as well as any other latencies. For
 example, it is the time between when EndpointA.Stage2 performs a REQUEST to AnotherEndpointB, till the REPLY
 from that endpoint is received on EndpointA.Stage3 (There can potentially be dozens of message passing and
 processings in between those two stages (of the same endpoint), as AnotherEndpointB might itself have a dozen
 stages, each performing requests to yet other endpoints).
 <p/>
 <b>Note that this is susceptible to time skews between nodes: If the preceding stage was run on node A, while
 this stage is run on node B, calculations on the timestamp returned from this method (from node A) vs. this
 node (B's) <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/System.html#currentTimeMillis()" title="class or interface in java.lang" class="external-link"><code>System.currentTimeMillis()</code></a> is highly dependent on the time synchronization between node A
 and node B.</b>
 <p/>
 Note: There is no preceding stage for a REQUEST to the Initial Stage of an Endpoint.
 <p/>
 Note: On a Terminator whose corresponding initiation did a REQUEST, the "same stack height" ends up being the
 initiator (it is stack height 0). If an initiation goes directly to a Terminator (e.g. "fire-and-forget"
 PUBLISH or SEND), again the "same stack height" is the initiator.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The timestamp of the outgoing message <i>on the same stack height</i> as this stage. If the current
         Call is a REQUEST, there is no such message, and <code>-1</code> is returned.</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="#getEndpointEnteredTimestamp()"><code>getEndpointEnteredTimestamp()</code></a></li>
<li><a href="../../MatsEndpoint.DetachedProcessContext.html#getFromTimestamp()"><code>MatsEndpoint.DetachedProcessContext.getFromTimestamp()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getIncomingMessageType()">
<h3>getIncomingMessageType</h3>
<div class="member-signature"><span class="return-type"><a href="MatsOutgoingMessage.MessageType.html" title="enum class in io.mats3.api.intercept">MatsOutgoingMessage.MessageType</a></span>&nbsp;<span class="element-name">getIncomingMessageType</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the <a href="MatsOutgoingMessage.MessageType.html" title="enum class in io.mats3.api.intercept"><code>MatsOutgoingMessage.MessageType</code></a> of the incoming message.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getIncomingState()">
<h3>getIncomingState</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&gt;</span>&nbsp;<span class="element-name">getIncomingState</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the incoming state (STO), if present (which it typically is for all stages except initial - albeit it
         is also possible to send state to the initial stage).</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getStateSerializedSize()">
<h3>getStateSerializedSize</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">getStateSerializedSize</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the number of units (bytes or characters) that the state (STO) serialized to. If
         <a href="#getIncomingState()"><code>getIncomingState()</code></a> is <code>Optional.empty()</code>, then this method returns 0.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getIncomingData()">
<h3>getIncomingData</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name">getIncomingData</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the incoming data (DTO).</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getDataSerializedSize()">
<h3>getDataSerializedSize</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">getDataSerializedSize</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the number of units (bytes or characters) that the data (DTO) serialized to. (<code>Null</code> data
         might give 0 or 4, or really whatever else the serializer uses to represent <code>null</code>).</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getIncomingSameStackHeightExtraState(java.lang.String,java.lang.Class)">
<h3>getIncomingSameStackHeightExtraState</h3>
<div class="member-signature"><span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;T&gt;</span>&nbsp;<span class="element-name">getIncomingSameStackHeightExtraState</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;key,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;T&gt;&nbsp;type)</span></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the extra-state, if any, on the incoming REPLY, NEXT or GOTO message - as set by
         <a href="MatsOutgoingMessage.MatsEditableOutgoingMessage.html#setSameStackHeightExtraState(java.lang.String,java.lang.Object)"><code>MatsOutgoingMessage.MatsEditableOutgoingMessage.setSameStackHeightExtraState(String, Object)</code></a>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getTotalPreprocessAndDeserializeNanos()">
<h3>getTotalPreprocessAndDeserializeNanos</h3>
<div class="member-signature"><span class="return-type">long</span>&nbsp;<span class="element-name">getTotalPreprocessAndDeserializeNanos</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the total time taken (in nanoseconds) from the reception of a message system message, via
         deconstruct; decompression; deserialization of envelope, message and state, to right before the
         invocation of the <a href="MatsStageInterceptor.html#stageReceived(io.mats3.api.intercept.MatsStageInterceptor.StageReceivedContext)"><code>MatsStageInterceptor.stageReceived(StageReceivedContext)</code></a>; approx. the sum
         of the timings below.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMessageSystemDeconstructNanos()">
<h3>getMessageSystemDeconstructNanos</h3>
<div class="member-signature"><span class="return-type">long</span>&nbsp;<span class="element-name">getMessageSystemDeconstructNanos</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>time taken (in nanoseconds) to pick the pieces out of the message system message.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getEnvelopeWireSize()">
<h3>getEnvelopeWireSize</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">getEnvelopeWireSize</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>size (in bytes) of the envelope "on the wire", which often is compressed, which is picked out of the
         message system message in <a href="#getMessageSystemDeconstructNanos()"><code>getMessageSystemDeconstructNanos()</code></a>. If compression was not
         applied, returns the same value as <a href="#getEnvelopeSerializedSize()"><code>getEnvelopeSerializedSize()</code></a>. Note that the returned size
         is only the (compressed) Mats envelope, and does not include the size of the messaging system's
         message/envelope and any meta-data that Mats adds to this. This means that the message size on the
         wire will be larger.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getEnvelopeDecompressionNanos()">
<h3>getEnvelopeDecompressionNanos</h3>
<div class="member-signature"><span class="return-type">long</span>&nbsp;<span class="element-name">getEnvelopeDecompressionNanos</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>time taken (in nanoseconds) to decompress the "on the wire" representation of the envelope. - will be
         <code>0</code> if no compression was applied, while it will return &gt; 0 if compression was applied.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getEnvelopeSerializedSize()">
<h3>getEnvelopeSerializedSize</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">getEnvelopeSerializedSize</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>size (in bytes) of the serialized envelope - after decompression. Do read the JavaDoc of
         <a href="#getEnvelopeWireSize()"><code>getEnvelopeWireSize()</code></a> too, as the same applies here: This size only refers to the Mats
         envelope, not the messaging system's final message size.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getEnvelopeDeserializationNanos()">
<h3>getEnvelopeDeserializationNanos</h3>
<div class="member-signature"><span class="return-type">long</span>&nbsp;<span class="element-name">getEnvelopeDeserializationNanos</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>time taken (in nanoseconds) to deserialize the envelope.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getDataAndStateDeserializationNanos()">
<h3>getDataAndStateDeserializationNanos</h3>
<div class="member-signature"><span class="return-type">long</span>&nbsp;<span class="element-name">getDataAndStateDeserializationNanos</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>time taken (in nanoseconds) to deserialize the data (DTO) and state (STO) from the envelope, before
         invoking the user lambda with them.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMessageSystemTotalWireSize()">
<h3>getMessageSystemTotalWireSize</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getMessageSystemTotalWireSize</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the number of bytes sent on the wire (best approximation), as far as Mats knows. Any overhead from
         the message system is unknown. Includes the envelope (which includes the TraceProperties), as well as
         the sideloads (bytes and strings). Implementation might add some more size for metadata. Notice that
         the strings are just "length()'ed", so any "exotic" characters are still just counted as 1 byte.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
