<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>DeferredConnectionProxyDataSourceWrapper (mats3 0.19.1-2022-11-13 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: io.mats3.util.wrappers, class: DeferredConnectionProxyDataSourceWrapper">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">io.mats3.util.wrappers</a></div>
<h1 title="Class DeferredConnectionProxyDataSourceWrapper" class="title">Class DeferredConnectionProxyDataSourceWrapper</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="DataSourceWrapper.html" title="class in io.mats3.util.wrappers">io.mats3.util.wrappers.DataSourceWrapper</a>
<div class="inheritance">io.mats3.util.wrappers.DeferredConnectionProxyDataSourceWrapper</div>
</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../../MatsFactory.MatsWrapper.html" title="interface in io.mats3">MatsFactory.MatsWrapper</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a>&gt;</code>, <code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Wrapper.html" title="class or interface in java.sql" class="external-link">Wrapper</a></code>, <code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/CommonDataSource.html" title="class or interface in javax.sql" class="external-link">CommonDataSource</a></code>, <code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a></code></dd>
</dl>
<dl class="notes">
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="../../spring/jms/tx/JmsMatsTransactionManager_JmsAndSpringManagedSqlTx.DeferredConnectionProxyDataSourceWrapper_InfrastructureProxy.html" title="class in io.mats3.spring.jms.tx">JmsMatsTransactionManager_JmsAndSpringManagedSqlTx.DeferredConnectionProxyDataSourceWrapper_InfrastructureProxy</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">DeferredConnectionProxyDataSourceWrapper</span>
<span class="extends-implements">extends <a href="DataSourceWrapper.html" title="class in io.mats3.util.wrappers">DataSourceWrapper</a></span></div>
<div class="block">DataSource wrapper which returns thin Connection proxies (currently employing Java's "dynamic proxy" functionality)
 which do not actually fetch a Connection until it is needed. It defers as long as possible, "holding back" calls to
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html#setAutoCommit(boolean)" title="class or interface in java.sql" class="external-link"><code>setAutoCommit(..)</code></a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html#setTransactionIsolation(int)" title="class or interface in java.sql" class="external-link"><code>setTransactionIsolation(..)</code></a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html#setReadOnly(boolean)" title="class or interface in java.sql" class="external-link"><code>setReadOnly(..)</code></a>, and ignores any
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html#commit()" title="class or interface in java.sql" class="external-link"><code>commit()</code></a> and <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html#rollback()" title="class or interface in java.sql" class="external-link"><code>rollback()</code></a>, as well as handling some
 surrounding methods like toString(), equals(), hashCode() etc, until the user code e.g. creates a Statement or
 PreparedStatement - i.e. not until the user code actually needs to talk to the database. This deferring results in a
 situation where if the user code opens a transaction, but does <i>not</i> need to talk to the database after all, and
 then commits the transaction, the entire operation is elided - saving several round-trips over the wire.
 <p/>
 The use of Java Dynamic Proxies is a simple way to ensure that the implementation is future proof, in that any method
 that appears on the Connection in any Java version will be handled by triggering actual Connection fetching and
 subsequent call-through to the actual method. Only the methods that are used in standard transaction management are
 specially handled to defer the getting of the actual Connection.
 <p/>
 Note that it is assumed that the AutoCommit, TransactionIsolation and ReadOnly values are identical for all fetched
 Connections (that is, the pool resets them to some default when <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html#close()" title="class or interface in java.sql" class="external-link"><code>connection.close()</code></a> is
 invoked). The default values for these properties are retrieved from the very first Connection that is actually
 fetched. The deferring works as such: If you set one of these value on the returned proxied Connection, this will be
 recorded, and will subsequently be set on the actual Connection once it is fetched because it is needed (e.g. when a
 PreparedStatement is created). However, as a further performance optimization, when about to set the value, it is
 compared against those default values gotten from the first Connection, and if they are equal, the actual
 setting-invocation is elided.
 <p/>
 Inspired by Spring's LazyConnectionDataSourceProxy, but with the additional feature that you can query the Connection
 proxy for whether the underlying Connection was actually gotten, since it is a <a href="DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy.html" title="interface in io.mats3.util.wrappers"><code>DeferredConnectionProxy</code></a> (extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link"><code>Connection</code></a>). It also has the method
 <a href="#actualConnectionWasRetrieved(io.mats3.util.wrappers.DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy,java.sql.Connection)"><code>actualConnectionWasRetrieved(proxy,
 actualConnection)</code></a> which can be interesting for extensions. It also has the method
 <a href="#methodInvoked(boolean,io.mats3.util.wrappers.DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy,java.sql.Connection,java.lang.reflect.Method,java.lang.Object%5B%5D,java.lang.Object)"><code>methodInvoked(..)</code></a>,
 which is invoked after every method invoked on the returned <a href="DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy.html" title="interface in io.mats3.util.wrappers"><code>DeferredConnectionProxy</code></a>s,
 which primarily is interesting for testing, but might have other uses.
 <p/>
 If in a Spring environment, the returned Connection instances furthermore implements
 <code>org.springframework.jdbc.datasource.ConnectionProxy</code>.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static interface&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy.html" class="type-name-link" title="interface in io.mats3.util.wrappers">DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy</a></code></div>
<div class="col-last even-row-color">
<div class="block">Provides a method to query whether the Connection actually was gotten.</div>
</div>
<div class="col-first odd-row-color"><code>protected class&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="DeferredConnectionProxyDataSourceWrapper.DeferredFetchInvocationHandler.html" class="type-name-link" title="class in io.mats3.util.wrappers">DeferredConnectionProxyDataSourceWrapper.DeferredFetchInvocationHandler</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Implementation of Java's "dynamic proxy" <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/reflect/InvocationHandler.html" title="class or interface in java.lang.reflect" class="external-link"><code>InvocationHandler</code></a> for deferring fetching of actual Connection
 until necessary.</div>
</div>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a></code></div>
<div class="col-second even-row-color"><code><a href="#_autoCommitFromWrappedDataSource" class="member-name-link">_autoCommitFromWrappedDataSource</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a></code></div>
<div class="col-second odd-row-color"><code><a href="#_readOnlyFromWrappedDataSource" class="member-name-link">_readOnlyFromWrappedDataSource</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a></code></div>
<div class="col-second even-row-color"><code><a href="#_transactionIsolationFromWrappedDataSource" class="member-name-link">_transactionIsolationFromWrappedDataSource</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier</div>
<div class="table-header col-second">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected </code></div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">DeferredConnectionProxyDataSourceWrapper</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected </code></div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(javax.sql.DataSource)" class="member-name-link">DeferredConnectionProxyDataSourceWrapper</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a>&nbsp;targetDataSource)</code></div>
<div class="col-last odd-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#actualConnectionWasRetrieved(io.mats3.util.wrappers.DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy,java.sql.Connection)" class="member-name-link">actualConnectionWasRetrieved</a><wbr>(<a href="DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy.html" title="interface in io.mats3.util.wrappers">DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy</a>&nbsp;connectionProxy,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;actualConnection)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Override if you want to know when the actual Connection was retrieved.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAutoCommitFromWrappedDataSource()" class="member-name-link">getAutoCommitFromWrappedDataSource</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy.html" title="interface in io.mats3.util.wrappers">DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getConnection()" class="member-name-link">getConnection</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy.html" title="interface in io.mats3.util.wrappers">DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getConnection(java.lang.String,java.lang.String)" class="member-name-link">getConnection</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getReadOnlyFromWrappedDataSource()" class="member-name-link">getReadOnlyFromWrappedDataSource</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getTransactionIsolationFromWrappedDataSource()" class="member-name-link">getTransactionIsolationFromWrappedDataSource</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#methodInvoked(boolean,io.mats3.util.wrappers.DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy,java.sql.Connection,java.lang.reflect.Method,java.lang.Object%5B%5D,java.lang.Object)" class="member-name-link">methodInvoked</a><wbr>(boolean&nbsp;answeredByProxy,
 <a href="DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy.html" title="interface in io.mats3.util.wrappers">DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy</a>&nbsp;connectionProxy,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;actualConnection,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/reflect/Method.html" title="class or interface in java.lang.reflect" class="external-link">Method</a>&nbsp;method,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>[]&nbsp;args,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;result)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Override if you want to know about every method invoked on the <a href="DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy.html" title="interface in io.mats3.util.wrappers"><code>DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy</code></a>, its arguments
 and its return value, and whether it was the proxy or the actual Connection that answered.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#retrieveDefaultAutoCommitAndTransactionIsolationAndReadOnlyValues(java.sql.Connection)" class="member-name-link">retrieveDefaultAutoCommitAndTransactionIsolationAndReadOnlyValues</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;con)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="DeferredConnectionProxyDataSourceWrapper.html" title="class in io.mats3.util.wrappers">DeferredConnectionProxyDataSourceWrapper</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#wrap(javax.sql.DataSource)" class="member-name-link">wrap</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a>&nbsp;dataSource)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-io.mats3.util.wrappers.DataSourceWrapper">Methods inherited from class&nbsp;io.mats3.util.wrappers.<a href="DataSourceWrapper.html" title="class in io.mats3.util.wrappers">DataSourceWrapper</a></h3>
<code><a href="DataSourceWrapper.html#getLoginTimeout()">getLoginTimeout</a>, <a href="DataSourceWrapper.html#getLogWriter()">getLogWriter</a>, <a href="DataSourceWrapper.html#getParentLogger()">getParentLogger</a>, <a href="DataSourceWrapper.html#isWrapperFor(java.lang.Class)">isWrapperFor</a>, <a href="DataSourceWrapper.html#setLoginTimeout(int)">setLoginTimeout</a>, <a href="DataSourceWrapper.html#setLogWriter(java.io.PrintWriter)">setLogWriter</a>, <a href="DataSourceWrapper.html#setWrappee(javax.sql.DataSource)">setWrappee</a>, <a href="DataSourceWrapper.html#toString()">toString</a>, <a href="DataSourceWrapper.html#unwrap()">unwrap</a>, <a href="DataSourceWrapper.html#unwrap(java.lang.Class)">unwrap</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-javax.sql.CommonDataSource">Methods inherited from interface&nbsp;javax.sql.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/CommonDataSource.html" title="class or interface in javax.sql" class="external-link">CommonDataSource</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/CommonDataSource.html#createShardingKeyBuilder()" title="class or interface in javax.sql" class="external-link">createShardingKeyBuilder</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-javax.sql.DataSource">Methods inherited from interface&nbsp;javax.sql.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html#createConnectionBuilder()" title="class or interface in javax.sql" class="external-link">createConnectionBuilder</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-io.mats3.MatsFactory.MatsWrapper">Methods inherited from interface&nbsp;io.mats3.<a href="../../MatsFactory.MatsWrapper.html" title="interface in io.mats3">MatsFactory.MatsWrapper</a></h3>
<code><a href="../../MatsFactory.MatsWrapper.html#unwrapFully()">unwrapFully</a>, <a href="../../MatsFactory.MatsWrapper.html#unwrapTo(java.lang.Class)">unwrapTo</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="_autoCommitFromWrappedDataSource">
<h3>_autoCommitFromWrappedDataSource</h3>
<div class="member-signature"><span class="modifiers">protected volatile</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a></span>&nbsp;<span class="element-name">_autoCommitFromWrappedDataSource</span></div>
</section>
</li>
<li>
<section class="detail" id="_transactionIsolationFromWrappedDataSource">
<h3>_transactionIsolationFromWrappedDataSource</h3>
<div class="member-signature"><span class="modifiers">protected volatile</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a></span>&nbsp;<span class="element-name">_transactionIsolationFromWrappedDataSource</span></div>
</section>
</li>
<li>
<section class="detail" id="_readOnlyFromWrappedDataSource">
<h3>_readOnlyFromWrappedDataSource</h3>
<div class="member-signature"><span class="modifiers">protected volatile</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a></span>&nbsp;<span class="element-name">_readOnlyFromWrappedDataSource</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>DeferredConnectionProxyDataSourceWrapper</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="element-name">DeferredConnectionProxyDataSourceWrapper</span>()</div>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(javax.sql.DataSource)">
<h3>DeferredConnectionProxyDataSourceWrapper</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="element-name">DeferredConnectionProxyDataSourceWrapper</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a>&nbsp;targetDataSource)</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="wrap(javax.sql.DataSource)">
<h3>wrap</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="DeferredConnectionProxyDataSourceWrapper.html" title="class in io.mats3.util.wrappers">DeferredConnectionProxyDataSourceWrapper</a></span>&nbsp;<span class="element-name">wrap</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a>&nbsp;dataSource)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>dataSource</code> - the DataSource to wrap.</dd>
<dt>Returns:</dt>
<dd>an instance of this class wrapping the supplied DataSource.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getConnection()">
<h3>getConnection</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy.html" title="interface in io.mats3.util.wrappers">DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy</a></span>&nbsp;<span class="element-name">getConnection</span>()
                                                                               throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html#getConnection()" title="class or interface in javax.sql" class="external-link">getConnection</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a></code></dd>
<dt>Overrides:</dt>
<dd><code><a href="DataSourceWrapper.html#getConnection()">getConnection</a></code>&nbsp;in class&nbsp;<code><a href="DataSourceWrapper.html" title="class in io.mats3.util.wrappers">DataSourceWrapper</a></code></dd>
<dt>Returns:</dt>
<dd>a "thin Proxy", implemented as Java's "dynamic proxy", NOT YET proxying an actual Connection.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - can actually never throw SQLException, since it just gives you a proxy.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getConnection(java.lang.String,java.lang.String)">
<h3>getConnection</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy.html" title="interface in io.mats3.util.wrappers">DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy</a></span>&nbsp;<span class="element-name">getConnection</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password)</span>
                                                                               throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html#getConnection(java.lang.String,java.lang.String)" title="class or interface in javax.sql" class="external-link">getConnection</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a></code></dd>
<dt>Overrides:</dt>
<dd><code><a href="DataSourceWrapper.html#getConnection(java.lang.String,java.lang.String)">getConnection</a></code>&nbsp;in class&nbsp;<code><a href="DataSourceWrapper.html" title="class in io.mats3.util.wrappers">DataSourceWrapper</a></code></dd>
<dt>Parameters:</dt>
<dd><code>username</code> - username to to forward to underlying DataSource.getConnection(username, password) when Connection
            needs to be gotten.</dd>
<dd><code>password</code> - password to to forward to underlying DataSource.getConnection(username, password) when Connection
            needs to be gotten.</dd>
<dt>Returns:</dt>
<dd>a "thin Proxy", implemented as Java's "dynamic proxy", NOT YET proxying an actual Connection.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - can actually never throw SQLException, since it just gives you a proxy.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="actualConnectionWasRetrieved(io.mats3.util.wrappers.DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy,java.sql.Connection)">
<h3>actualConnectionWasRetrieved</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">actualConnectionWasRetrieved</span><wbr><span class="parameters">(<a href="DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy.html" title="interface in io.mats3.util.wrappers">DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy</a>&nbsp;connectionProxy,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;actualConnection)</span></div>
<div class="block">Override if you want to know when the actual Connection was retrieved. Default implementation logs to debug.</div>
</section>
</li>
<li>
<section class="detail" id="methodInvoked(boolean,io.mats3.util.wrappers.DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy,java.sql.Connection,java.lang.reflect.Method,java.lang.Object[],java.lang.Object)">
<h3>methodInvoked</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">methodInvoked</span><wbr><span class="parameters">(boolean&nbsp;answeredByProxy,
 <a href="DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy.html" title="interface in io.mats3.util.wrappers">DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy</a>&nbsp;connectionProxy,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;actualConnection,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/reflect/Method.html" title="class or interface in java.lang.reflect" class="external-link">Method</a>&nbsp;method,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>[]&nbsp;args,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;result)</span></div>
<div class="block">Override if you want to know about every method invoked on the <a href="DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy.html" title="interface in io.mats3.util.wrappers"><code>DeferredConnectionProxyDataSourceWrapper.DeferredConnectionProxy</code></a>, its arguments
 and its return value, and whether it was the proxy or the actual Connection that answered. Default implementation
 does nothing.</div>
</section>
</li>
<li>
<section class="detail" id="getAutoCommitFromWrappedDataSource()">
<h3>getAutoCommitFromWrappedDataSource</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a></span>&nbsp;<span class="element-name">getAutoCommitFromWrappedDataSource</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>null</code> until the first underlying Connection has actually been gotten, after that what this
         first underlying Connection replied to invocation of <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html#getAutoCommit()" title="class or interface in java.sql" class="external-link"><code>Connection.getAutoCommit()</code></a>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getTransactionIsolationFromWrappedDataSource()">
<h3>getTransactionIsolationFromWrappedDataSource</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a></span>&nbsp;<span class="element-name">getTransactionIsolationFromWrappedDataSource</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>null</code> until the first underlying Connection has actually been gotten, after that what this
         first underlying Connection replied to invocation of <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html#getTransactionIsolation()" title="class or interface in java.sql" class="external-link"><code>Connection.getTransactionIsolation()</code></a>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getReadOnlyFromWrappedDataSource()">
<h3>getReadOnlyFromWrappedDataSource</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a></span>&nbsp;<span class="element-name">getReadOnlyFromWrappedDataSource</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>null</code> until the first underlying Connection has actually been gotten, after that what this
         first underlying Connection replied to invocation of <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html#isReadOnly()" title="class or interface in java.sql" class="external-link"><code>Connection.isReadOnly()</code></a>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="retrieveDefaultAutoCommitAndTransactionIsolationAndReadOnlyValues(java.sql.Connection)">
<h3>retrieveDefaultAutoCommitAndTransactionIsolationAndReadOnlyValues</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">retrieveDefaultAutoCommitAndTransactionIsolationAndReadOnlyValues</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;con)</span>
                                                                          throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
