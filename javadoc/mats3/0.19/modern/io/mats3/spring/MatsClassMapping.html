<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>MatsClassMapping (mats3 0.19.9-2023-05-04 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: io.mats3.spring, annotation type: MatsClassMapping">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation-interface-optional-element-summary">Optional</a>&nbsp;|&nbsp;</li>
<li>Required</li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation-interface-element-detail">Element</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">io.mats3.spring</a></div>
<h1 title="Annotation Interface MatsClassMapping" class="title">Annotation Interface MatsClassMapping</h1>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Documented.html" title="class or interface in java.lang.annotation" class="external-link">@Documented</a>
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Retention.html" title="class or interface in java.lang.annotation" class="external-link">@Retention</a>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/RetentionPolicy.html#RUNTIME" title="class or interface in java.lang.annotation" class="external-link">RUNTIME</a>)
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Target.html" title="class or interface in java.lang.annotation" class="external-link">@Target</a>({<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/ElementType.html#TYPE" title="class or interface in java.lang.annotation" class="external-link">TYPE</a>,<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/ElementType.html#ANNOTATION_TYPE" title="class or interface in java.lang.annotation" class="external-link">ANNOTATION_TYPE</a>})
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Repeatable.html" title="class or interface in java.lang.annotation" class="external-link">@Repeatable</a>(<a href="MatsClassMapping.MatsClassMappings.html" title="annotation interface in io.mats3.spring">MatsClassMappings.class</a>)
@Service
</span><span class="modifiers">public @interface </span><span class="element-name type-name-label">MatsClassMapping</span></div>
<div class="block">A class annotated with this repeatable annotation will become a Mats Endpoint, where an instance of the class itself
 is the State (STO) object for the Endpoint, and each @<a href="MatsClassMapping.Stage.html" title="annotation interface in io.mats3.spring"><code>Stage</code></a>-annotated method on the class is a stage of
 the Endpoint. This annotation is meta-annotated with @<code>Service</code>, and is thus also a Spring bean. This singleton
 Spring bean acts as a "template" for the State, and any wired (injected/autowired) fields will be available for the
 stage-methods, but will not be regarded as part of the State when serialized and sent on the wire. You should use the
 Java-modifier <code>transient</code> on such Spring-injected fields, so that the serializer understands that it is
 not a part of state. In addition, if a field is of type <a href="../MatsEndpoint.ProcessContext.html" title="interface in io.mats3"><code>ProcessContext</code></a>, it will be injected by
 the Mats JavaConfig machinery before a stage-method is invoked.
 <p/>
 All methods that are annotated with @<a href="MatsClassMapping.Stage.html" title="annotation interface in io.mats3.spring"><code>Stage</code></a> is regarded as a stage of the Mats Endpoint. To know the
 order of the stages, and ordinal must be assigned to the Stage - read its JavaDoc. The initial stage is the method
 annotated with <code>@Stage(0)</code> (The constant <a href="MatsClassMapping.Stage.html#INITIAL"><code>Stage.INITIAL</code></a> is conveniently available),
 and the subsequent stages are the ordered list of these stage-methods. The last stage will typically have a return
 type - which defines the return type of the endpoint - while no other stage can have a return type. It is, however,
 still possible to return early if needed, by using <a href="../MatsEndpoint.ProcessContext.html#reply(R)"><code>context.reply(..)</code></a>. If the
 last stage does not have a return type (i.e. it is <code>void</code>), it will be a Terminator. Any methods that are
 not annotated with <code>@Stage</code> is ignored, thus you may structure and divide your code into sub methods as
 you see fit.
 <p/>
 <b>Note:</b> If you only need a single stage, i.e. a single-stage Endpoint, or Terminator, you should instead
 consider <a href="MatsMapping.html" title="annotation interface in io.mats3.spring"><code>MatsMapping</code></a>.
 <p/>
 <b>Note:</b> You should mark the injected/autowired fields with the java keyword <code>transient</code> to ensure
 that the serializer understands that it is not part of the state. <i>(The values are <code>null</code>'ed out before
 state serialization takes place, so an injected DataSource will never be attempted serialized as state. However, some
 type of serializers, e.g. Gson, will prepare to serialize all fields, even though they will always be null, and thus
 possibly fail on newer versions of Java. Such preparation does not take place if a field is marked transient.)</i>
 <p/>
 Each stage-method can take zero, one, two or many arguments. The machinery looks for a ProcessContext and an incoming
 DTO argument. Neither ProcessContext nor an incoming DTO is required. The rationale for taking more than the required
 arguments is that you could potentially want to invoke it differently in a testing scenario (depending on how you
 feel towards testing).
 <ul>
 <li>0: No ProcessContext nor incoming DTO.</li>
 <li>1: Either it is a ProcessContext, otherwise it must be the incoming DTO.</li>
 <li>2: If one is a ProcessContext, the other must be the incoming DTO.</li>
 <li>2+: One may be the ProcessContext, and the others are searched for the @<a href="Dto.html" title="annotation interface in io.mats3.spring"><code>Dto</code></a> annotation, and if one is
 found, this is the incoming DTO.</li>
 </ul>
 <p/>
 The logic to determine which fields are state, and which fields are injected, is as follows: When Mats SpringConfig
 gets the bean, injection is already performed by Spring. Any fields that are non-null is thus assumed to be injected
 by Spring and not part of the State, <i>unless</i> the field is <i>also</i> non-null when simply instantiated as a
 new object, using the current Mats serialization mechanism of creating an empty State object. The rationale for the
 latter is that such fields must be default initialized, like e.g.
 <code>List&lt;Car&gt; cars = new ArrayList&lt;&gt;()</code>. A field of type ProcessContext is not a state field.
 <p/>
 It is worth noting that the singleton Spring-constructed bean instance is never actually employed outside of being
 inspected at start up: Its class is inspected to set up the MatsEndpoint and its stages, and the singleton instance
 is used as a <i>template</i> for which fields of the Endpoint's State object are injected, and which fields are
 state.
 <p/>
 In a multi-MatsFactory setup, you may qualify which MatsFactory this Endpoint should be constructed on - read JavaDoc
 on @<a href="MatsMapping.html" title="annotation interface in io.mats3.spring"><code>MatsMapping</code></a> for how this works.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="MatsMapping.html" title="annotation interface in io.mats3.spring"><code>MatsMapping</code></a></li>
<li><a href="MatsEndpointSetup.html" title="annotation interface in io.mats3.spring"><code>MatsEndpointSetup</code></a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static @interface&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="MatsClassMapping.MatsClassMappings.html" class="type-name-link" title="annotation interface in io.mats3.spring">MatsClassMapping.MatsClassMappings</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>static @interface&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="MatsClassMapping.Stage.html" class="type-name-link" title="annotation interface in io.mats3.spring">MatsClassMapping.Stage</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Each method in the class that shall correspond to a Stage on the Mats endpoint must be annotated with this
 <code>@Stage</code> annotation.</div>
</div>
</div>
</section>
</li>
<!-- =========== ANNOTATION INTERFACE OPTIONAL MEMBER SUMMARY =========== -->
<li>
<section class="member-summary" id="annotation-interface-optional-element-summary">
<h2>Optional Element Summary</h2>
<div class="caption"><span>Optional Elements</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Optional Element</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#endpointId()" class="member-name-link">endpointId</a></code></div>
<div class="col-last even-row-color">
<div class="block">The Mats <em>Endpoint Id</em> that this endpoint should listen to.</div>
</div>
<div class="col-first odd-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#matsFactoryBeanName()" class="member-name-link">matsFactoryBeanName</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Specified the <a href="../MatsFactory.html" title="interface in io.mats3"><code>MatsFactory</code></a> to use by means of specifying the bean name of the <a href="../MatsFactory.html" title="interface in io.mats3"><code>MatsFactory</code></a>.</div>
</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;? extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Annotation.html" title="class or interface in java.lang.annotation" class="external-link">Annotation</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#matsFactoryCustomQualifierType()" class="member-name-link">matsFactoryCustomQualifierType</a></code></div>
<div class="col-last even-row-color">
<div class="block">Specifies the <a href="../MatsFactory.html" title="interface in io.mats3"><code>MatsFactory</code></a> to use by means of a specific qualifier annotation type (which thus must be
 meta-annotated with <code>Qualifier</code>).</div>
</div>
<div class="col-first odd-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#matsFactoryQualifierValue()" class="member-name-link">matsFactoryQualifierValue</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Specified the <a href="../MatsFactory.html" title="interface in io.mats3"><code>MatsFactory</code></a> to use by means of specifying the <code>@Qualifier</code> <i>value</i>.</div>
</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#value()" class="member-name-link">value</a></code></div>
<div class="col-last even-row-color">
<div class="block">Alias for "endpointId", so that if you only need to set the endpointId, you can do so directly:
 <code>@MatsEndpointSetup("endpointId")</code></div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details" id="annotation-interface-element-detail">
<ul class="details-list">
<!-- ============ ANNOTATION INTERFACE MEMBER DETAIL =========== -->
<li>
<section class="member-details">
<h2>Element Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="endpointId()">
<h3>endpointId</h3>
<div class="member-signature"><span class="annotations">@AliasFor("value")
</span><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">endpointId</span></div>
<div class="block">The Mats <em>Endpoint Id</em> that this endpoint should listen to.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the Mats <em>Endpoint Id</em> which this endpoint listens to.</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>""</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="value()">
<h3>value</h3>
<div class="member-signature"><span class="annotations">@AliasFor("endpointId")
</span><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">value</span></div>
<div class="block">Alias for "endpointId", so that if you only need to set the endpointId, you can do so directly:
 <code>@MatsEndpointSetup("endpointId")</code></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the endpointId.</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>""</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="matsFactoryCustomQualifierType()">
<h3>matsFactoryCustomQualifierType</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;? extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Annotation.html" title="class or interface in java.lang.annotation" class="external-link">Annotation</a>&gt;</span>&nbsp;<span class="element-name">matsFactoryCustomQualifierType</span></div>
<div class="block">Specifies the <a href="../MatsFactory.html" title="interface in io.mats3"><code>MatsFactory</code></a> to use by means of a specific qualifier annotation type (which thus must be
 meta-annotated with <code>Qualifier</code>). Notice that this will search for the custom qualifier annotation
 <i>type</i>, as opposed to if you add the annotation to the @MatsEndpointSetup-annotated method directly, in
 which case it "equals" the annotation <i>instance</i> (as Spring also does when performing injection with such
 qualifiers). The difference comes into play if the annotation has values, where e.g. a
 <code>@SpecialMatsFactory(location="central")</code> is not equal to
 <code>@SpecialMatsFactory(location="region_west")</code> - but they are equal when comparing types, as the
 qualification here does. Thus, if using this qualifier-approach, you should probably not use values on your
 custom qualifier annotations (instead make separate custom qualifier annotations, e.g.
 <code>@MatsFactoryCentral</code> and <code>@MatsFactoryRegionWest</code> for the example).</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the <i>custom qualifier type</i> which the wanted <a href="../MatsFactory.html" title="interface in io.mats3"><code>MatsFactory</code></a> is qualified with.</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>java.lang.annotation.Annotation.class</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="matsFactoryQualifierValue()">
<h3>matsFactoryQualifierValue</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">matsFactoryQualifierValue</span></div>
<div class="block">Specified the <a href="../MatsFactory.html" title="interface in io.mats3"><code>MatsFactory</code></a> to use by means of specifying the <code>@Qualifier</code> <i>value</i>. Spring
 performs such lookup by first looking for actual qualifiers with the specified value, e.g.
 <code>@Qualifier(value="the_value")</code>. If this does not produce a result, it will try to find a bean with
 this value as the bean name.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the <i>qualifier value</i> which the wanted <a href="../MatsFactory.html" title="interface in io.mats3"><code>MatsFactory</code></a> is qualified with.</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>""</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="matsFactoryBeanName()">
<h3>matsFactoryBeanName</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">matsFactoryBeanName</span></div>
<div class="block">Specified the <a href="../MatsFactory.html" title="interface in io.mats3"><code>MatsFactory</code></a> to use by means of specifying the bean name of the <a href="../MatsFactory.html" title="interface in io.mats3"><code>MatsFactory</code></a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the <i>bean name</i> of the wanted <a href="../MatsFactory.html" title="interface in io.mats3"><code>MatsFactory</code></a>.</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>""</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
