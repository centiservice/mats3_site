<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>ScenarioConnectionFactoryProducer (mats3 0.19.1-2022-11-13 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: io.mats3.spring.jms.factories, class: ScenarioConnectionFactoryProducer">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">io.mats3.spring.jms.factories</a></div>
<h1 title="Class ScenarioConnectionFactoryProducer" class="title">Class ScenarioConnectionFactoryProducer</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">io.mats3.spring.jms.factories.ScenarioConnectionFactoryProducer</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="MatsProfiles.html" title="interface in io.mats3.spring.jms.factories">MatsProfiles</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">ScenarioConnectionFactoryProducer</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="MatsProfiles.html" title="interface in io.mats3.spring.jms.factories">MatsProfiles</a></span></div>
<div class="block">Provides a factory for a Spring-integrated Wrapper/Facade around a JMS ConnectionFactory, which in addition to
 supporting the production setup, also facilitates the development situation where you often want to run against
 either an in-vm MQ Broker or against a MQ Broker running on localhost, and also integrates with the
 "mats-spring-test" integration test library where when run with the <code>MatsTestProfile</code> you will most
 probably want an in-vm setup (typically mocking up the project-external Mats endpoints that the tested endpoints
 collaborate with). In the in-vm broker situations, the JMS ConnectionFactory instantiation lambda you provide for
 what will be used in the production setup will <b>not</b> be invoked, but instead an in-vm ActiveMQ Broker will be
 started, and an ActiveMQ ConnectionFactory will be produced.
 <p>
 Note: The actual decision logic and "Spring interfacing" is done in <a href="ScenarioConnectionFactoryWrapper.html" title="class in io.mats3.spring.jms.factories"><code>ScenarioConnectionFactoryWrapper</code></a>, which
 is the actual class of instances that will end up as Spring beans - this class is a producer of such instances,
 simplifying the configuration, providing sane defaults.
 <p>
 Do note that this is purely a convenience functionality, and is in no way required for the Mats system to work.
 <p>
 As a matter of fact, you can achieve the exact same with Spring's Profiles (or any other "switch configuration based
 on some property or state"-logic you can cook up), but this class effectively represents an opinionated
 implementation of the config switching that will be needed in most scenarios working with Mats, and will probably
 yield less configuration overall. Moreover, Mats will most probably be employed in a micro/multiple service
 architecture, and in such situations, it is nice to make some in-house library that constitute basic building blocks
 that all the services will need. With that in mind, this class also facilitates so you can easily construct an
 <code>@CompanyMatsSetup</code>-type annotation which alone will pull up both the needed ConnectionFactory (with URL
 and whatever needed already set) and MatsFactory, which handles all the mentioned scenarios, by merely placing that
 annotation on the main config class of your service.
 <p>
 The point is this: If you are new to Message Queue based development, you will probably soon sit with the problem of
 how to create a code base that efficiently lets you run it in production, while also is easy to develop on, and being
 simple to perform integration test on your endpoints - the problem being that you need different types of
 ConnectionFactories for the different scenarios, and in some cases also needing an in-vm MQ Broker.
 <p>
 There are typically four different scenarios that you need to juggle between, the two latter being identical wrt. the
 Mats setup (which is the reason that <a href="MatsScenario.html" title="enum class in io.mats3.spring.jms.factories"><code>MatsScenario</code></a> only has three scenarios defined):

 <ul>
 <li><b>Production / External Broker</b> (any production-like environments, e.g. Staging/Pre-prod): This is the
 standard/regular situation for a MQ-based application or service: Connect to the common external production or
 staging MQ Broker that all other services and their Mats endpoints connect to. <i>(Note that for the scenarios taken
 into account by this mechanism, all "external environments" (i.e. "production-like") are considered the same.
 However, you will most probably want the URLs to the external MQ Broker to be different between production and
 staging and any other such environment. Such switching must be handled by another mechanism.)</i></li>

 <li><b>Localhost development</b>, where you are developing on one project employing Mats Endpoints, but also run this
 project's required collaborating projects/services with their Mats Endpoints on your local development box (typically
 running the project you currently develop on directly in the IDE, while the other can either run in IDE or on command
 line): Connect to a MQ Broker that you've fired up on your local development box, i.e. localhost, which the other
 services running locally also connects to.</li>

 <li><b>Local-VM development</b>, where you just want to run the service alone, probably with some of the other
 collaborating Mats Endpoints from other projects/services mocked up in the same project: Connect to an in-vm MQ
 Broker. <b>An important thing to ensure here is that these mocks, which by definition resides on the same classpath,
 must <i>NOT</i> end up running in the production environment!</b></li>

 <li><b>Local-VM integration testing</b>, where you have integration tests either utilizing the full app config with
 overwriting of certain beans/endpoints using "Remock" or @MockBean, and mocking out collaborating Mats Endpoints from
 other projects/services; or piece together the required beans/endpoints using e.g. @Import and mocking out other
 endpoints: Connect to an in-vm MQ Broker.</li>
 </ul>

 Please now read (all the) JavaDoc of <a href="MatsProfiles.html" title="interface in io.mats3.spring.jms.factories"><code>MatsProfiles</code></a> and its enum values!
 <p>
 For the localhost and localVM scenarios, this class by default utilizes the ActiveMQ Broker and ConnectionFactory.
 For all scenarios, but in particular for the "regular" (production-like), you can provide whatever ConnectionFactory
 you want (configured as you desire) - this class will just wrap it.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-io.mats3.spring.jms.factories.MatsProfiles">Fields inherited from interface&nbsp;io.mats3.spring.jms.factories.<a href="MatsProfiles.html" title="interface in io.mats3.spring.jms.factories">MatsProfiles</a></h3>
<code><a href="MatsProfiles.html#PROFILE_MATS_LOCALHOST">PROFILE_MATS_LOCALHOST</a>, <a href="MatsProfiles.html#PROFILE_MATS_LOCALVM">PROFILE_MATS_LOCALVM</a>, <a href="MatsProfiles.html#PROFILE_MATS_MOCKS">PROFILE_MATS_MOCKS</a>, <a href="MatsProfiles.html#PROFILE_MATS_REGULAR">PROFILE_MATS_REGULAR</a>, <a href="MatsProfiles.html#PROFILE_MATS_TEST">PROFILE_MATS_TEST</a>, <a href="MatsProfiles.html#PROFILE_PRODUCTION">PROFILE_PRODUCTION</a>, <a href="MatsProfiles.html#PROFILE_STAGING">PROFILE_STAGING</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">ScenarioConnectionFactoryProducer</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ScenarioConnectionFactoryWrapper.html" title="class in io.mats3.spring.jms.factories">ScenarioConnectionFactoryWrapper</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#build()" class="member-name-link">build</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Creates the appropriate <code>ConnectionFactory</code>, which is a wrapper integrating with Spring - the decision
 between the configured scenarios is done after all Spring beans are defined.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ScenarioConnectionFactoryProducer.html" title="class in io.mats3.spring.jms.factories">ScenarioConnectionFactoryProducer</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#withDefaultScenario(io.mats3.spring.jms.factories.MatsScenario)" class="member-name-link">withDefaultScenario</a><wbr>(<a href="MatsScenario.html" title="enum class in io.mats3.spring.jms.factories">MatsScenario</a>&nbsp;defaultScenario)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Very optional: If you do not set the <a href="ScenarioConnectionFactoryWrapper.ScenarioDecider.html" title="interface in io.mats3.spring.jms.factories"><code>ScenarioConnectionFactoryWrapper.ScenarioDecider</code></a> using the
 <a href="#withScenarioDecider(io.mats3.spring.jms.factories.ScenarioConnectionFactoryWrapper.ScenarioDecider)"><code>withScenarioDecider(ScenarioDecider)</code></a> method, you get a
 <a href="ConfigurableScenarioDecider.html#createDefaultScenarioDecider()"><code>ConfigurableScenarioDecider.createDefaultScenarioDecider()</code></a>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ScenarioConnectionFactoryProducer.html" title="class in io.mats3.spring.jms.factories">ScenarioConnectionFactoryProducer</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#withLocalhostConnectionFactory(io.mats3.spring.jms.factories.ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider)" class="member-name-link">withLocalhostConnectionFactory</a><wbr>(<a href="ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider.html" title="interface in io.mats3.spring.jms.factories">ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider</a>&nbsp;localhostConnectionFactoryProvider)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Optional: Provide a ConnectionFactoryProvider lambda for the <a href="MatsScenario.html#LOCALHOST"><code>LOCALHOST</code></a> scenario
 (which only is meant to be used for development and possibly testing).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ScenarioConnectionFactoryProducer.html" title="class in io.mats3.spring.jms.factories">ScenarioConnectionFactoryProducer</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#withLocalVmConnectionFactory(io.mats3.spring.jms.factories.ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider)" class="member-name-link">withLocalVmConnectionFactory</a><wbr>(<a href="ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider.html" title="interface in io.mats3.spring.jms.factories">ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider</a>&nbsp;localVmConnectionFactoryProvider)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Very optional: Provide a ConnectionFactoryProvider lambda for the <a href="MatsScenario.html#LOCALVM"><code>LOCALVM</code></a> scenario
 (which only is meant to be used for development and testing).</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="ScenarioConnectionFactoryProducer.html" title="class in io.mats3.spring.jms.factories">ScenarioConnectionFactoryProducer</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#withRegularConnectionFactory(io.mats3.spring.jms.factories.ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider)" class="member-name-link">withRegularConnectionFactory</a><wbr>(<a href="ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider.html" title="interface in io.mats3.spring.jms.factories">ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider</a>&nbsp;regularConnectionFactoryProvider)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Creates a <a href="ScenarioConnectionFactoryProducer.html" title="class in io.mats3.spring.jms.factories"><code>ScenarioConnectionFactoryProducer</code></a>, where you need to provide the <a href="MatsScenario.html#REGULAR"><code>REGULAR</code></a> scenario's <a href="ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider.html" title="interface in io.mats3.spring.jms.factories"><code>ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ScenarioConnectionFactoryProducer.html" title="class in io.mats3.spring.jms.factories">ScenarioConnectionFactoryProducer</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#withScenarioDecider(io.mats3.spring.jms.factories.ScenarioConnectionFactoryWrapper.ScenarioDecider)" class="member-name-link">withScenarioDecider</a><wbr>(<a href="ScenarioConnectionFactoryWrapper.ScenarioDecider.html" title="interface in io.mats3.spring.jms.factories">ScenarioConnectionFactoryWrapper.ScenarioDecider</a>&nbsp;scenarioDecider)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Can optionally be overridden should you decide to use a different decision-scheme than the
 <a href="ConfigurableScenarioDecider.html#createDefaultScenarioDecider()"><code>default</code></a>.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>ScenarioConnectionFactoryProducer</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">ScenarioConnectionFactoryProducer</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="withRegularConnectionFactory(io.mats3.spring.jms.factories.ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider)">
<h3>withRegularConnectionFactory</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="ScenarioConnectionFactoryProducer.html" title="class in io.mats3.spring.jms.factories">ScenarioConnectionFactoryProducer</a></span>&nbsp;<span class="element-name">withRegularConnectionFactory</span><wbr><span class="parameters">(<a href="ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider.html" title="interface in io.mats3.spring.jms.factories">ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider</a>&nbsp;regularConnectionFactoryProvider)</span></div>
<div class="block">Creates a <a href="ScenarioConnectionFactoryProducer.html" title="class in io.mats3.spring.jms.factories"><code>ScenarioConnectionFactoryProducer</code></a>, where you need to provide the <a href="MatsScenario.html#REGULAR"><code>REGULAR</code></a> scenario's <a href="ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider.html" title="interface in io.mats3.spring.jms.factories"><code>ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider</code></a>. This is the one that will be used in Production and
 Production-like environments, e.g. Staging, Acceptance Testing, Pre-Prod or whatever you call those environments.
 You may invoke the other "withXXX" methods to tailor further, but this is optional. After finished setup, invoke
 <a href="#build()"><code>build()</code></a> to get the <a href="ScenarioConnectionFactoryWrapper.html" title="class in io.mats3.spring.jms.factories"><code>ScenarioConnectionFactoryWrapper</code></a> that you then can feed to a
 <a href="../../../MatsFactory.html" title="interface in io.mats3"><code>MatsFactory</code></a>.
 <p>
 Notice that deciding between Production and e.g. Staging and which corresponding ConnectionFactory URL or even
 type of ConnectionFactory you should employ here, is up to you: You might be using configuration properties,
 Spring's Profile concept, System Properties (java cmd line "-D"-properties), or system environment variables -
 only you know how you differentiate between these environments.
 <p>
 Notice: You are required to set up this provider lambda. However, if you are just setting up your project,
 wanting to start writing tests, or otherwise only use the <a href="MatsScenario.html#LOCALVM"><code>LocalVM scenario</code></a>, and thus
 will not utilize the "regular" scenario just yet, you could just supply a lambda here that throws e.g. an
 IllegalStateException or somesuch - which probably will remind you to fix this before going into production!</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>regularConnectionFactoryProvider</code> - a provider for the ConnectionFactory to use in the <a href="MatsScenario.html#REGULAR"><code>REGULAR</code></a> scenario.</dd>
<dt>Returns:</dt>
<dd>a <a href="ScenarioConnectionFactoryProducer.html" title="class in io.mats3.spring.jms.factories"><code>ScenarioConnectionFactoryProducer</code></a> on which you then optionally can invoke
         <a href="#withLocalhostConnectionFactory(io.mats3.spring.jms.factories.ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider)"><code>withLocalhostConnectionFactory(ConnectionFactoryProvider)</code></a>,
         <a href="#withLocalVmConnectionFactory(io.mats3.spring.jms.factories.ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider)"><code>withLocalVmConnectionFactory(ConnectionFactoryProvider)</code></a> and
         <a href="#withScenarioDecider(io.mats3.spring.jms.factories.ScenarioConnectionFactoryWrapper.ScenarioDecider)"><code>withScenarioDecider(ScenarioDecider)</code></a>, before invoking <a href="#build()"><code>build()</code></a>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="withLocalhostConnectionFactory(io.mats3.spring.jms.factories.ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider)">
<h3>withLocalhostConnectionFactory</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ScenarioConnectionFactoryProducer.html" title="class in io.mats3.spring.jms.factories">ScenarioConnectionFactoryProducer</a></span>&nbsp;<span class="element-name">withLocalhostConnectionFactory</span><wbr><span class="parameters">(<a href="ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider.html" title="interface in io.mats3.spring.jms.factories">ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider</a>&nbsp;localhostConnectionFactoryProvider)</span></div>
<div class="block">Optional: Provide a ConnectionFactoryProvider lambda for the <a href="MatsScenario.html#LOCALHOST"><code>LOCALHOST</code></a> scenario
 (which only is meant to be used for development and possibly testing). If this is not provided, it will be a
 somewhat specially tailored ActiveMQ ConnectionFactory with the URL <code>"tcp://localhost:61616"</code>, read
 more in the <a href="https://activemq.apache.org/tcp-transport-reference">ActiveMQ documentation</a>. The
 tailoring entails DLQ after 1 retry, and 100 ms delay between delivery and the sole redelivery attempt.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>localhostConnectionFactoryProvider</code> - a provider for the ConnectionFactory to use in the <a href="MatsScenario.html#LOCALHOST"><code>LOCALHOST</code></a> scenario.</dd>
<dt>Returns:</dt>
<dd><code>this</code>, for chaining.</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="https://activemq.apache.org/tcp-transport-reference">ActiveMQ TCP Transport Reference</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="withLocalVmConnectionFactory(io.mats3.spring.jms.factories.ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider)">
<h3>withLocalVmConnectionFactory</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ScenarioConnectionFactoryProducer.html" title="class in io.mats3.spring.jms.factories">ScenarioConnectionFactoryProducer</a></span>&nbsp;<span class="element-name">withLocalVmConnectionFactory</span><wbr><span class="parameters">(<a href="ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider.html" title="interface in io.mats3.spring.jms.factories">ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider</a>&nbsp;localVmConnectionFactoryProvider)</span></div>
<div class="block">Very optional: Provide a ConnectionFactoryProvider lambda for the <a href="MatsScenario.html#LOCALVM"><code>LOCALVM</code></a> scenario
 (which only is meant to be used for development and testing). The implementation of the lambda is expected to
 return a ConnectionFactory to an in-vm MQ Broker. You probably want to have this ConnectionFactory wrapped in
 your own extension of <a href="ConnectionFactoryWithStartStopWrapper.html" title="class in io.mats3.spring.jms.factories"><code>ConnectionFactoryWithStartStopWrapper</code></a>, which provide a way to start and stop the
 in-vm MQ Broker. If this configuration is not provided (and not having to handle this mess is a big point of this
 class, so do not provide this unless you want a different broker entirely!), the class
 <a href="../../../test/broker/MatsTestBroker.html" title="interface in io.mats3.test.broker"><code>MatsTestBroker</code></a> will be instantiated by invoking
 <a href="../../../test/broker/MatsTestBroker.html#createUniqueInVmActiveMq()"><code>MatsTestBroker.createUniqueInVmActiveMq()</code></a>. From the instance of <code>MatsTestBroker</code>, the
 <a href="../../../test/broker/MatsTestBroker.html#getConnectionFactory()"><code>ConnectionFactory will be gotten</code></a>.
 <p>
 Notice that the <code>MatsTestBroker</code> has a small extra feature, where you can have it produce a
 ConnectionFactory to localhost or a specific URL instead of the in-vm MQ Broker it otherwise produces, by means
 of specifying a special system property ("-D" options) (In this case, it does not create the in-vm MQ Broker
 either). The rationale for this extra feature is if you wonder how big a difference it makes to run your tests
 against a proper MQ Broker instead of the in-vm and fully non-persistent MQ Broker you by default get. Read
 JavaDoc at <a href="../../../test/broker/MatsTestBroker.html" title="interface in io.mats3.test.broker"><code>MatsTestBroker</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>localVmConnectionFactoryProvider</code> - a provider for the ConnectionFactory to use in the <a href="MatsScenario.html#LOCALVM"><code>LOCALVM</code></a> scenario.</dd>
<dt>Returns:</dt>
<dd><code>this</code>, for chaining.</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../test/broker/MatsTestBroker.html" title="interface in io.mats3.test.broker"><code>MatsTestBroker</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="withDefaultScenario(io.mats3.spring.jms.factories.MatsScenario)">
<h3>withDefaultScenario</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ScenarioConnectionFactoryProducer.html" title="class in io.mats3.spring.jms.factories">ScenarioConnectionFactoryProducer</a></span>&nbsp;<span class="element-name">withDefaultScenario</span><wbr><span class="parameters">(<a href="MatsScenario.html" title="enum class in io.mats3.spring.jms.factories">MatsScenario</a>&nbsp;defaultScenario)</span></div>
<div class="block">Very optional: If you do not set the <a href="ScenarioConnectionFactoryWrapper.ScenarioDecider.html" title="interface in io.mats3.spring.jms.factories"><code>ScenarioConnectionFactoryWrapper.ScenarioDecider</code></a> using the
 <a href="#withScenarioDecider(io.mats3.spring.jms.factories.ScenarioConnectionFactoryWrapper.ScenarioDecider)"><code>withScenarioDecider(ScenarioDecider)</code></a> method, you get a
 <a href="ConfigurableScenarioDecider.html#createDefaultScenarioDecider()"><code>ConfigurableScenarioDecider.createDefaultScenarioDecider()</code></a>. This default is configured to throw
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link"><code>IllegalStateException</code></a> if none of the <a href="MatsScenario.html" title="enum class in io.mats3.spring.jms.factories"><code>MatsScenario</code></a>s are chosen. This method can override that by
 invoking the <a href="ConfigurableScenarioDecider.html#setDefaultScenario(java.util.function.Supplier)"><code>ConfigurableScenarioDecider.setDefaultScenario(Supplier)</code></a> method for you.
 <p/>
 Note: This should not be used in conjunction with invoking the <a href="#withScenarioDecider(io.mats3.spring.jms.factories.ScenarioConnectionFactoryWrapper.ScenarioDecider)"><code>withScenarioDecider(ScenarioDecider)</code></a>, as
 you should have handled the default scenario situation in the ScenarioDecider you provide!</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>defaultScenario</code> - which <a href="MatsScenario.html" title="enum class in io.mats3.spring.jms.factories"><code>MatsScenario</code></a> should be chosen if the <a href="ScenarioConnectionFactoryWrapper.ScenarioDecider.html" title="interface in io.mats3.spring.jms.factories"><code>ScenarioConnectionFactoryWrapper.ScenarioDecider</code></a> does not choose one.</dd>
<dt>Returns:</dt>
<dd><code>this</code>, for chaining.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="withScenarioDecider(io.mats3.spring.jms.factories.ScenarioConnectionFactoryWrapper.ScenarioDecider)">
<h3>withScenarioDecider</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ScenarioConnectionFactoryProducer.html" title="class in io.mats3.spring.jms.factories">ScenarioConnectionFactoryProducer</a></span>&nbsp;<span class="element-name">withScenarioDecider</span><wbr><span class="parameters">(<a href="ScenarioConnectionFactoryWrapper.ScenarioDecider.html" title="interface in io.mats3.spring.jms.factories">ScenarioConnectionFactoryWrapper.ScenarioDecider</a>&nbsp;scenarioDecider)</span></div>
<div class="block">Can optionally be overridden should you decide to use a different decision-scheme than the
 <a href="ConfigurableScenarioDecider.html#createDefaultScenarioDecider()"><code>default</code></a>. We need a decision for which
 MatsScenario is in effect for this JVM, and you can override the standard here. <i>(Do note that if you want to
 run integration tests against a specific Active MQ Broker, e.g. on your localhost, there is already a feature for
 that in <a href="../../../test/broker/MatsTestBroker.html" title="interface in io.mats3.test.broker"><code>MatsTestBroker</code></a>, as mentioned in the JavaDoc of
 <a href="#withLocalVmConnectionFactory(io.mats3.spring.jms.factories.ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider)"><code>localVmConnectionFactory(..)</code></a>).</i>
 <p/>
 How you otherwise decide between <a href="MatsScenario.html#REGULAR"><code>REGULAR</code></a>, <a href="MatsScenario.html#LOCALHOST"><code>LOCALHOST</code></a>
 and <a href="MatsScenario.html#LOCALVM"><code>LOCALVM</code></a> is up to you. <i>(For REGULAR, you will again have to decide whether you
 are in Production or Staging or whatever, if this e.g. gives different URLs or changes which ConnectionFactory
 class to instantiate - read more at <a href="#withRegularConnectionFactory(io.mats3.spring.jms.factories.ScenarioConnectionFactoryWrapper.ConnectionFactoryProvider)"><code>withRegularConnectionFactory(ConnectionFactoryProvider)</code></a>.</i>
 <p/>
 Note: This method should not be used in conjunction with invoking the <a href="#withDefaultScenario(io.mats3.spring.jms.factories.MatsScenario)"><code>withDefaultScenario(MatsScenario)</code></a>
 method, as you should have handled the default scenario situation in the ScenarioDecider you provide!</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>scenarioDecider</code> - the <a href="ScenarioConnectionFactoryWrapper.ScenarioDecider.html" title="interface in io.mats3.spring.jms.factories"><code>ScenarioConnectionFactoryWrapper.ScenarioDecider</code></a> that should decide between the three <a href="MatsScenario.html" title="enum class in io.mats3.spring.jms.factories"><code>MatsScenario</code></a>s.</dd>
<dt>Returns:</dt>
<dd><code>this</code>, for chaining.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="build()">
<h3>build</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ScenarioConnectionFactoryWrapper.html" title="class in io.mats3.spring.jms.factories">ScenarioConnectionFactoryWrapper</a></span>&nbsp;<span class="element-name">build</span>()</div>
<div class="block">Creates the appropriate <code>ConnectionFactory</code>, which is a wrapper integrating with Spring - the decision
 between the configured scenarios is done after all Spring beans are defined.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the appropriate <code>ConnectionFactory</code>, which is a wrapper integrating with Spring.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
