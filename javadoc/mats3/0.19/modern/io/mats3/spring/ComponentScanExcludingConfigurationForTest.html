<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>ComponentScanExcludingConfigurationForTest (mats3 0.19.9-2023-05-04 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: io.mats3.spring, annotation type: ComponentScanExcludingConfigurationForTest">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation-interface-optional-element-summary">Optional</a>&nbsp;|&nbsp;</li>
<li>Required</li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation-interface-element-detail">Element</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">io.mats3.spring</a></div>
<h1 title="Annotation Interface ComponentScanExcludingConfigurationForTest" class="title">Annotation Interface ComponentScanExcludingConfigurationForTest</h1>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Target.html" title="class or interface in java.lang.annotation" class="external-link">@Target</a>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/ElementType.html#TYPE" title="class or interface in java.lang.annotation" class="external-link">TYPE</a>)
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Retention.html" title="class or interface in java.lang.annotation" class="external-link">@Retention</a>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/RetentionPolicy.html#RUNTIME" title="class or interface in java.lang.annotation" class="external-link">RUNTIME</a>)
@Configuration
@ComponentScan(excludeFilters=)
</span><span class="modifiers">public @interface </span><span class="element-name type-name-label">ComponentScanExcludingConfigurationForTest</span></div>
<div class="block">A simple convenience replacement for @ComponentScan which excludes any configuration classes employing the special
 <a href="ConfigurationForTest.html" title="annotation interface in io.mats3.spring"><code>@ConfigurationForTest</code></a> annotation instead of the standard <code>@Configuration</code>
 annotation. This is meant as a solution for a rather common problem that arises when your application
 uses @ComponentScan to find @Services, @Components etc, and have integration tests that reside in "src/test/java",
 but has the same package as the application code (to allow for package access). In the tests, you might want to
 include the entire application's Spring configuration, thus you include the same @ComponentScan. The problem now is
 that since all the test classes are included on the classpath when running a test, and at the same time reside in the
 same package structure, the component scan will pick up all tests' @Configuration classes too. This is absolutely not
 what you wanted - in particular if e.g. two different tests tries to set up two different variants of a mock
 collaborating Mats endpoint (that is, an application-external service that this application communicates with):
 You'll end up trying to take up both variants at the same time, and since they have the same endpointId, Mats will
 refuse this.
 <p>
 If you employ this annotation (@ComponentScanExcludingConfigurationForTest) - or set up the same "excludeFilters" as
 this annotation does - you will <i>not</i> include any configuration classes that are annotated with
 <a href="ConfigurationForTest.html" title="annotation interface in io.mats3.spring"><code>@ConfigurationForTest</code></a> instead of the ordinary @Configuration. However, each test will
 still pick up its own inner static @ConfigurationForTest class(es).
 <p>
 A test class employing @ConfigurationForTest would look something like this:

 <pre>
 &#64;MatsTestProfile // &lt;- If you employ the JmsSpringConnectionFactoryProducer's logic to handle JMS ConnectionFactory
 &#64;RunWith(SpringRunner.class)
 public class IntegrationTestClass {

     &#64;ConfigurationForTest
     &#64;Import(ApplicationSpringConfigurationClass_Using_ComponentScanExcludingConfigurationForTest.class)
     public static class InnerStaticConfigurationClassForTest {
         // &#64;Bean definitions
         // &#64;MatsMapping definitions
     }

     // @Inject'ed fields..
     // @Test-methods..
 }
 </pre>
 <p>
 If you want to do the exclusion on your own, you can use the standard @ComponentScan, making sure you include this
 excludeFilters property:

 <pre>
  &#64;ComponentScan(excludeFilters = {
      &#64;Filter(type = FilterType.ANNOTATION, value = ConfigurationForTest.class)
  })
 </pre>
 <p>
 This class has @AliasFor all properties that Spring 4.x has on @ComponentScan. If new properties arrive later which
 you want to use, you will have to do the exclusion on your own.
 <p>
 <b>NOTICE:</b> An alternative way to achieve the same effect is to annotate the integration test class
 with @ContextConfiguration, pointing to both the application's Spring setup, and also the configuration class
 residing within the test class - <i>but where the test's configuration class is <b>not</b> annotated
 with @Configuration.</i> Such an integration test class would look something like this:

 <pre>
 &#64;MatsTestProfile // &lt;- If you employ the JmsSpringConnectionFactoryProducer's logic to handle JMS ConnectionFactory
 &#64;RunWith(SpringRunner.class)
 &#64;ContextConfiguration(classes = { ApplicationSpringConfigurationClass_Using_ComponentScan.class,
         InnerStaticConfigurationClassForTest.class })
 public class IntegrationTestClass {

     // Notice how this configuration class is NOT annotated with &#64;Configuration, to avoid being picked up by
     // application's &#64;ComponentScan
     public static class InnerStaticConfigurationClassForTest {
         // &#64;Bean definitions
         // &#64;MatsMapping definitions
     }

     // @Inject'ed fields..
     // @Test-methods..
 }
 </pre></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="ConfigurationForTest.html" title="annotation interface in io.mats3.spring"><code>ConfigurationForTest</code></a></li>
<li><a href="https://stackoverflow.com/a/46344822/39334">Stackoverflow answer to question about this problem, where
      the idea for this pair of annotations is ripped from.</a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== ANNOTATION INTERFACE OPTIONAL MEMBER SUMMARY =========== -->
<li>
<section class="member-summary" id="annotation-interface-optional-element-summary">
<h2>Optional Element Summary</h2>
<div class="caption"><span>Optional Elements</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Optional Element</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;?&gt;[]</code></div>
<div class="col-second even-row-color"><code><a href="#basePackageClasses()" class="member-name-link">basePackageClasses</a></code></div>
<div class="col-last even-row-color">
<div class="block">Type-safe alternative to <a href="#basePackages()"><code>basePackages()</code></a> for specifying the packages to scan for annotated components.</div>
</div>
<div class="col-first odd-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second odd-row-color"><code><a href="#basePackages()" class="member-name-link">basePackages</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Base packages to scan for annotated components.</div>
</div>
<div class="col-first even-row-color"><code>org.springframework.context.annotation.ComponentScan.Filter[]</code></div>
<div class="col-second even-row-color"><code><a href="#excludeFilters()" class="member-name-link">excludeFilters</a></code></div>
<div class="col-last even-row-color">
<div class="block">Specifies which types are not eligible for component scanning.</div>
</div>
<div class="col-first odd-row-color"><code>org.springframework.context.annotation.ComponentScan.Filter[]</code></div>
<div class="col-second odd-row-color"><code><a href="#includeFilters()" class="member-name-link">includeFilters</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Specifies which types are eligible for component scanning.</div>
</div>
<div class="col-first even-row-color"><code>boolean</code></div>
<div class="col-second even-row-color"><code><a href="#lazyInit()" class="member-name-link">lazyInit</a></code></div>
<div class="col-last even-row-color">
<div class="block">Specify whether scanned beans should be registered for lazy initialization.</div>
</div>
<div class="col-first odd-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;? extends org.springframework.beans.factory.support.BeanNameGenerator&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#nameGenerator()" class="member-name-link">nameGenerator</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The <code>BeanNameGenerator</code> class to be used for naming detected components within the Spring container.</div>
</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#resourcePattern()" class="member-name-link">resourcePattern</a></code></div>
<div class="col-last even-row-color">
<div class="block">Controls the class files eligible for component detection.</div>
</div>
<div class="col-first odd-row-color"><code>org.springframework.context.annotation.ScopedProxyMode</code></div>
<div class="col-second odd-row-color"><code><a href="#scopedProxy()" class="member-name-link">scopedProxy</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Indicates whether proxies should be generated for detected components, which may be necessary when using scopes
 in a proxy-style fashion.</div>
</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;? extends org.springframework.context.annotation.ScopeMetadataResolver&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#scopeResolver()" class="member-name-link">scopeResolver</a></code></div>
<div class="col-last even-row-color">
<div class="block">The <code>ScopeMetadataResolver</code> to be used for resolving the scope of detected components.</div>
</div>
<div class="col-first odd-row-color"><code>boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#useDefaultFilters()" class="member-name-link">useDefaultFilters</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Indicates whether automatic detection of classes annotated with <code>@Component</code> <code>@Repository</code>,
 <code>@Service</code>, or <code>@Controller</code> should be enabled.</div>
</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second even-row-color"><code><a href="#value()" class="member-name-link">value</a></code></div>
<div class="col-last even-row-color">
<div class="block">Alias for <a href="#basePackages()"><code>basePackages()</code></a>.</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details" id="annotation-interface-element-detail">
<ul class="details-list">
<!-- ============ ANNOTATION INTERFACE MEMBER DETAIL =========== -->
<li>
<section class="member-details">
<h2>Element Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="value()">
<h3>value</h3>
<div class="member-signature"><span class="annotations">@AliasFor(annotation=org.springframework.context.annotation.ComponentScan.class,
          attribute="value")
</span><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name">value</span></div>
<div class="block">Alias for <a href="#basePackages()"><code>basePackages()</code></a>.
 <p>
 Allows for more concise annotation declarations if no other attributes are needed &mdash; for example,
 <code>@ComponentScan("org.my.pkg")</code> instead of <code>@ComponentScan(basePackages = "org.my.pkg")</code>.</div>
<dl class="notes">
<dt>Default:</dt>
<dd>{}</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="basePackages()">
<h3>basePackages</h3>
<div class="member-signature"><span class="annotations">@AliasFor(annotation=org.springframework.context.annotation.ComponentScan.class,
          attribute="basePackages")
</span><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name">basePackages</span></div>
<div class="block">Base packages to scan for annotated components.
 <p>
 <a href="#value()"><code>value()</code></a> is an alias for (and mutually exclusive with) this attribute.
 <p>
 Use <a href="#basePackageClasses()"><code>basePackageClasses()</code></a> for a type-safe alternative to String-based package names.</div>
<dl class="notes">
<dt>Default:</dt>
<dd>{}</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="basePackageClasses()">
<h3>basePackageClasses</h3>
<div class="member-signature"><span class="annotations">@AliasFor(annotation=org.springframework.context.annotation.ComponentScan.class,
          attribute="basePackageClasses")
</span><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;?&gt;[]</span>&nbsp;<span class="element-name">basePackageClasses</span></div>
<div class="block">Type-safe alternative to <a href="#basePackages()"><code>basePackages()</code></a> for specifying the packages to scan for annotated components. The
 package of each class specified will be scanned.
 <p>
 Consider creating a special no-op marker class or interface in each package that serves no purpose other than
 being referenced by this attribute.</div>
<dl class="notes">
<dt>Default:</dt>
<dd>{}</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="nameGenerator()">
<h3>nameGenerator</h3>
<div class="member-signature"><span class="annotations">@AliasFor(annotation=org.springframework.context.annotation.ComponentScan.class,
          attribute="nameGenerator")
</span><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;? extends org.springframework.beans.factory.support.BeanNameGenerator&gt;</span>&nbsp;<span class="element-name">nameGenerator</span></div>
<div class="block">The <code>BeanNameGenerator</code> class to be used for naming detected components within the Spring container.
 <p>
 The default value of the <code>BeanNameGenerator</code> interface itself indicates that the scanner used to process
 this <code>@ComponentScan</code> annotation should use its inherited bean name generator, e.g. the default
 <code>AnnotationBeanNameGenerator</code> or any custom instance supplied to the application context at bootstrap time.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><code>AnnotationConfigApplicationContext.setBeanNameGenerator(BeanNameGenerator)</code></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>org.springframework.beans.factory.support.BeanNameGenerator.class</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="scopeResolver()">
<h3>scopeResolver</h3>
<div class="member-signature"><span class="annotations">@AliasFor(annotation=org.springframework.context.annotation.ComponentScan.class,
          attribute="scopeResolver")
</span><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;? extends org.springframework.context.annotation.ScopeMetadataResolver&gt;</span>&nbsp;<span class="element-name">scopeResolver</span></div>
<div class="block">The <code>ScopeMetadataResolver</code> to be used for resolving the scope of detected components.</div>
<dl class="notes">
<dt>Default:</dt>
<dd>org.springframework.context.annotation.AnnotationScopeMetadataResolver.class</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="scopedProxy()">
<h3>scopedProxy</h3>
<div class="member-signature"><span class="annotations">@AliasFor(annotation=org.springframework.context.annotation.ComponentScan.class,
          attribute="scopedProxy")
</span><span class="return-type">org.springframework.context.annotation.ScopedProxyMode</span>&nbsp;<span class="element-name">scopedProxy</span></div>
<div class="block">Indicates whether proxies should be generated for detected components, which may be necessary when using scopes
 in a proxy-style fashion.
 <p>
 The default is defer to the default behavior of the component scanner used to execute the actual scan.
 <p>
 Note that setting this attribute overrides any value set for <a href="#scopeResolver()"><code>scopeResolver()</code></a>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><code>ClassPathBeanDefinitionScanner.setScopedProxyMode(ScopedProxyMode)</code></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>DEFAULT</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="resourcePattern()">
<h3>resourcePattern</h3>
<div class="member-signature"><span class="annotations">@AliasFor(annotation=org.springframework.context.annotation.ComponentScan.class,
          attribute="resourcePattern")
</span><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">resourcePattern</span></div>
<div class="block">Controls the class files eligible for component detection.
 <p>
 Consider use of <a href="#includeFilters()"><code>includeFilters()</code></a> and <a href="#excludeFilters()"><code>excludeFilters()</code></a> for a more flexible approach.</div>
<dl class="notes">
<dt>Default:</dt>
<dd>"**/*.class"</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="useDefaultFilters()">
<h3>useDefaultFilters</h3>
<div class="member-signature"><span class="annotations">@AliasFor(annotation=org.springframework.context.annotation.ComponentScan.class,
          attribute="useDefaultFilters")
</span><span class="return-type">boolean</span>&nbsp;<span class="element-name">useDefaultFilters</span></div>
<div class="block">Indicates whether automatic detection of classes annotated with <code>@Component</code> <code>@Repository</code>,
 <code>@Service</code>, or <code>@Controller</code> should be enabled.</div>
<dl class="notes">
<dt>Default:</dt>
<dd>true</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="includeFilters()">
<h3>includeFilters</h3>
<div class="member-signature"><span class="annotations">@AliasFor(annotation=org.springframework.context.annotation.ComponentScan.class,
          attribute="includeFilters")
</span><span class="return-type">org.springframework.context.annotation.ComponentScan.Filter[]</span>&nbsp;<span class="element-name">includeFilters</span></div>
<div class="block">Specifies which types are eligible for component scanning.
 <p>
 Further narrows the set of candidate components from everything in <a href="#basePackages()"><code>basePackages()</code></a> to everything in the
 base packages that matches the given filter or filters.
 <p>
 Note that these filters will be applied in addition to the default filters, if specified. Any type under the
 specified base packages which matches a given filter will be included, even if it does not match the default
 filters (i.e. is not annotated with <code>@Component</code>).</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#resourcePattern()"><code>resourcePattern()</code></a></li>
<li><a href="#useDefaultFilters()"><code>useDefaultFilters()</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>{}</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="excludeFilters()">
<h3>excludeFilters</h3>
<div class="member-signature"><span class="annotations">@AliasFor(annotation=org.springframework.context.annotation.ComponentScan.class,
          attribute="excludeFilters")
</span><span class="return-type">org.springframework.context.annotation.ComponentScan.Filter[]</span>&nbsp;<span class="element-name">excludeFilters</span></div>
<div class="block">Specifies which types are not eligible for component scanning. <B>NOTICE: For this special variant, the default
 is set to exclude @ConfigurationForTest annotated classes</B></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#resourcePattern()"><code>resourcePattern()</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>{@org.springframework.context.annotation.ComponentScan.Filter(type=ANNOTATION, value={io.mats3.spring.ConfigurationForTest.class})}</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="lazyInit()">
<h3>lazyInit</h3>
<div class="member-signature"><span class="annotations">@AliasFor(annotation=org.springframework.context.annotation.ComponentScan.class,
          attribute="lazyInit")
</span><span class="return-type">boolean</span>&nbsp;<span class="element-name">lazyInit</span></div>
<div class="block">Specify whether scanned beans should be registered for lazy initialization.
 <p>
 Default is <code>false</code>; switch this to <code>true</code> when desired.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>4.1</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>false</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
