<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>MatsStageInterceptor (mats3 0.19.1-2022-11-13 API)</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="MatsStageInterceptor (mats3 0.19.1-2022-11-13 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":18,"i1":18,"i2":18,"i3":18};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../io/mats3/api/intercept/MatsOutgoingMessage.MessageType.html" title="enum in io.mats3.api.intercept"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.MatsStageInterceptOutgoingMessages.html" title="interface in io.mats3.api.intercept"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?io/mats3/api/intercept/MatsStageInterceptor.html" target="_top">Frames</a></li>
<li><a href="MatsStageInterceptor.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">io.mats3.api.intercept</div>
<h2 title="Interface MatsStageInterceptor" class="title">Interface MatsStageInterceptor</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Subinterfaces:</dt>
<dd><a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.MatsStageInterceptOutgoingMessages.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.MatsStageInterceptOutgoingMessages</a></dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../io/mats3/localinspect/LocalStatsMatsInterceptor.html" title="class in io.mats3.localinspect">LocalStatsMatsInterceptor</a>, <a href="../../../../io/mats3/intercept/logging/MatsMetricsLoggingInterceptor.html" title="class in io.mats3.intercept.logging">MatsMetricsLoggingInterceptor</a>, <a href="../../../../io/mats3/intercept/micrometer/MatsMicrometerInterceptor.html" title="class in io.mats3.intercept.micrometer">MatsMicrometerInterceptor</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">MatsStageInterceptor</span></pre>
<div class="block"><b>Implement this interface to intercept Stage Processing</b>, then register with
 <a href="../../../../io/mats3/api/intercept/MatsInterceptable.html#addStageInterceptor-io.mats3.api.intercept.MatsStageInterceptor-"><code>MatsInterceptable.addStageInterceptor(MatsStageInterceptor)</code></a>.
 <p />
 Intercepts stage processors with ability to modify the stage processing, and implement extra logging and metrics
 gathering.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Interface and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.MatsStageInterceptOutgoingMessages.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.MatsStageInterceptOutgoingMessages</a></span></code>
<div class="block">While still within the stage process context, this interception enables modifying outgoing messages from the user
 lambda, setting trace properties, adding "sideloads", deleting a message, or initiating additional messages.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.MatsStageInterceptUserLambda.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.MatsStageInterceptUserLambda</a></span></code>
<div class="block">Enables the intercepting of the invocation of the "user lambda" in a Stage, with ability to wrap the
 <a href="../../../../io/mats3/MatsEndpoint.ProcessContext.html" title="interface in io.mats3"><code>MatsEndpoint.ProcessContext</code></a> (and thus modify any reply, request, next or initiations) and/or modifying state and
 message - or even take over the entire stage.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.StageCommonContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StageCommonContext</a></span></code>
<div class="block">Common context elements for stage interception, including all the incoming message/envelope data and metadata.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.StageCompletedContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StageCompletedContext</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.StageInterceptContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StageInterceptContext</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.StageInterceptOutgoingMessageContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StageInterceptOutgoingMessageContext</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.StageInterceptUserLambdaContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StageInterceptUserLambdaContext</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.StagePreprocessAndDeserializeErrorContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StagePreprocessAndDeserializeErrorContext</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.StageReceivedContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StageReceivedContext</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>default void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.html#stageCompleted-io.mats3.api.intercept.MatsStageInterceptor.StageCompletedContext-">stageCompleted</a></span>(<a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.StageCompletedContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StageCompletedContext</a>&nbsp;context)</code>
<div class="block">Invoked <i>after</i> the stage is fully completed, outgoing messages sent, db and messaging system committed.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>default void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.html#stageCompletedNextDirect-io.mats3.api.intercept.MatsStageInterceptor.StageCompletedContext-">stageCompletedNextDirect</a></span>(<a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.StageCompletedContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StageCompletedContext</a>&nbsp;context)</code>
<div class="block">Special variant of <a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.html#stageCompleted-io.mats3.api.intercept.MatsStageInterceptor.StageCompletedContext-"><code>stageCompleted(StageCompletedContext)</code></a> which is invoked when a
 <a href="../../../../io/mats3/MatsEndpoint.ProcessContext.html#nextDirect-java.lang.Object-"><code>MatsEndpoint.ProcessContext.nextDirect(Object)</code></a> has been performed: As opposed to the ordinary variant, this does
 <i>not</i> execute outside the stage's transactional demarcation, since the nextDirect stage processing happens
 within the same transactional demarcation as the stage which invoked nextDirect.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>default void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.html#stagePreprocessAndDeserializeError-io.mats3.api.intercept.MatsStageInterceptor.StagePreprocessAndDeserializeErrorContext-">stagePreprocessAndDeserializeError</a></span>(<a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.StagePreprocessAndDeserializeErrorContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StagePreprocessAndDeserializeErrorContext</a>&nbsp;context)</code>
<div class="block">Invoked if any of the preprocessing and deserialization activities on the incoming message from the message
 system fails, and hence no Stage processing will be performed - i.e., no further methods of the interceptor will
 be invoked.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>default void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.html#stageReceived-io.mats3.api.intercept.MatsStageInterceptor.StageReceivedContext-">stageReceived</a></span>(<a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.StageReceivedContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StageReceivedContext</a>&nbsp;context)</code>
<div class="block">Invoked right after message have been received, preprocessed and deserialized, before invoking the user lambda.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="stagePreprocessAndDeserializeError-io.mats3.api.intercept.MatsStageInterceptor.StagePreprocessAndDeserializeErrorContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stagePreprocessAndDeserializeError</h4>
<pre>default&nbsp;void&nbsp;stagePreprocessAndDeserializeError(<a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.StagePreprocessAndDeserializeErrorContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StagePreprocessAndDeserializeErrorContext</a>&nbsp;context)</pre>
<div class="block">Invoked if any of the preprocessing and deserialization activities on the incoming message from the message
 system fails, and hence no Stage processing will be performed - i.e., no further methods of the interceptor will
 be invoked. Conversely, this method will not be invoked in normal situations: If the normal user lambda throws,
 or database or messaging system fails, this will result in the <a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.StageCompletedContext.html" title="interface in io.mats3.api.intercept"><code>MatsStageInterceptor.StageCompletedContext</code></a> of the
 <a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.html#stageCompleted-io.mats3.api.intercept.MatsStageInterceptor.StageCompletedContext-"><code>stageCompleted(..)</code></a> call describe the problem and contain the
 cause, see <a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.StageCompletedContext.ProcessResult.html#USER_EXCEPTION"><code>MatsStageInterceptor.StageCompletedContext.ProcessResult.USER_EXCEPTION</code></a> and <a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.StageCompletedContext.ProcessResult.html#SYSTEM_EXCEPTION"><code>MatsStageInterceptor.StageCompletedContext.ProcessResult.SYSTEM_EXCEPTION</code></a>.
 <p />
 <b>Note: This should really never be triggered. It would be prudent to "notify the humans" if it ever did.</b></div>
</li>
</ul>
<a name="stageReceived-io.mats3.api.intercept.MatsStageInterceptor.StageReceivedContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stageReceived</h4>
<pre>default&nbsp;void&nbsp;stageReceived(<a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.StageReceivedContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StageReceivedContext</a>&nbsp;context)</pre>
<div class="block">Invoked right after message have been received, preprocessed and deserialized, before invoking the user lambda.
 (If any error occurs during preprocess or deserialization, then
 <a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.html#stagePreprocessAndDeserializeError-io.mats3.api.intercept.MatsStageInterceptor.StagePreprocessAndDeserializeErrorContext-"><code>stagePreprocessAndDeserializeError(StagePreprocessAndDeserializeErrorContext)</code></a> is invoked instead).</div>
</li>
</ul>
<a name="stageCompleted-io.mats3.api.intercept.MatsStageInterceptor.StageCompletedContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stageCompleted</h4>
<pre>default&nbsp;void&nbsp;stageCompleted(<a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.StageCompletedContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StageCompletedContext</a>&nbsp;context)</pre>
<div class="block">Invoked <i>after</i> the stage is fully completed, outgoing messages sent, db and messaging system committed. You
 cannot anymore modify any outgoing messages etc - for this, implement <a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.MatsStageInterceptOutgoingMessages.html" title="interface in io.mats3.api.intercept"><code>MatsStageInterceptor.MatsStageInterceptOutgoingMessages</code></a>.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.html#stageCompletedNextDirect-io.mats3.api.intercept.MatsStageInterceptor.StageCompletedContext-"><code>stageCompletedNextDirect(StageCompletedContext)</code></a></dd>
</dl>
</li>
</ul>
<a name="stageCompletedNextDirect-io.mats3.api.intercept.MatsStageInterceptor.StageCompletedContext-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>stageCompletedNextDirect</h4>
<pre>default&nbsp;void&nbsp;stageCompletedNextDirect(<a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.StageCompletedContext.html" title="interface in io.mats3.api.intercept">MatsStageInterceptor.StageCompletedContext</a>&nbsp;context)</pre>
<div class="block">Special variant of <a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.html#stageCompleted-io.mats3.api.intercept.MatsStageInterceptor.StageCompletedContext-"><code>stageCompleted(StageCompletedContext)</code></a> which is invoked when a
 <a href="../../../../io/mats3/MatsEndpoint.ProcessContext.html#nextDirect-java.lang.Object-"><code>MatsEndpoint.ProcessContext.nextDirect(Object)</code></a> has been performed: As opposed to the ordinary variant, this does
 <i>not</i> execute outside the stage's transactional demarcation, since the nextDirect stage processing happens
 within the same transactional demarcation as the stage which invoked nextDirect. Therefore, no outgoing messages
 has yet been sent, and db and message system are not yet committed.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../io/mats3/api/intercept/MatsOutgoingMessage.MessageType.html" title="enum in io.mats3.api.intercept"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../io/mats3/api/intercept/MatsStageInterceptor.MatsStageInterceptOutgoingMessages.html" title="interface in io.mats3.api.intercept"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?io/mats3/api/intercept/MatsStageInterceptor.html" target="_top">Frames</a></li>
<li><a href="MatsStageInterceptor.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
