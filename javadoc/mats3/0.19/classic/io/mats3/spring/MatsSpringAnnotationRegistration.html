<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>MatsSpringAnnotationRegistration (mats3 0.19.1-2022-11-13 API)</title>
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="MatsSpringAnnotationRegistration (mats3 0.19.1-2022-11-13 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../io/mats3/spring/MatsMapping.MatsMappings.html" title="annotation in io.mats3.spring"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../io/mats3/spring/MatsSpringAnnotationRegistration.MatsSpringConfigException.html" title="class in io.mats3.spring"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?io/mats3/spring/MatsSpringAnnotationRegistration.html" target="_top">Frames</a></li>
<li><a href="MatsSpringAnnotationRegistration.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">io.mats3.spring</div>
<h2 title="Class MatsSpringAnnotationRegistration" class="title">Class MatsSpringAnnotationRegistration</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>io.mats3.spring.MatsSpringAnnotationRegistration</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>org.springframework.beans.factory.Aware, org.springframework.beans.factory.config.BeanPostProcessor, org.springframework.context.ApplicationContextAware</dd>
</dl>
<hr>
<br>
<pre>@Role(value=2)
 @Component
public class <span class="typeNameLabel">MatsSpringAnnotationRegistration</span>
extends java.lang.Object
implements org.springframework.beans.factory.config.BeanPostProcessor, org.springframework.context.ApplicationContextAware</pre>
<div class="block">The <code>BeanPostProcessor</code>-class specified by the <a href="../../../io/mats3/spring/EnableMats.html" title="annotation in io.mats3.spring"><code>@EnableMats</code></a> annotation.
 <p />
 It checks all Spring beans in the current Spring <code>ApplicationContext</code> for whether their classes are annotated
 with <a href="../../../io/mats3/spring/MatsClassMapping.html" title="annotation in io.mats3.spring"><code>@MatsClassMapping</code></a>, or if they have methods annotated with
 <a href="../../../io/mats3/spring/MatsMapping.html" title="annotation in io.mats3.spring"><code>@MatsMapping</code></a> or <a href="../../../io/mats3/spring/MatsEndpointSetup.html" title="annotation in io.mats3.spring"><code>@MatsEndpointSetup</code></a>, and if so configures Mats endpoints
 for them on the (possibly specified) <a href="../../../io/mats3/MatsFactory.html" title="interface in io.mats3"><code>MatsFactory</code></a>. It will also control any registered <a href="../../../io/mats3/MatsFactory.html" title="interface in io.mats3"><code>MatsFactory</code></a>
 beans, invoking <a href="../../../io/mats3/MatsFactory.html#holdEndpointsUntilFactoryIsStarted--"><code>MatsFactory.holdEndpointsUntilFactoryIsStarted()</code></a> early in the startup procedure before adding
 the endpoints, and then <a href="../../../io/mats3/MatsFactory.html#start--"><code>MatsFactory.start()</code></a> as late as possible in the startup procedure.
 Upon Spring context shutdown, it invokes <a href="../../../io/mats3/MatsFactory.html#stop-int-"><code>MatsFactory.stop(..)</code></a> as early as possible in
 the shutdown procedure.

 <h3>This is the startup procedure:</h3>
 <ol>
 <li>The <a href="../../../io/mats3/spring/MatsSpringAnnotationRegistration.html" title="class in io.mats3.spring"><code>MatsSpringAnnotationRegistration</code></a> (which is a <code>BeanPostProcessor</code>) will have each bean in
 the Spring ApplicationContext presented:
 <ol>
 <li>Each <a href="../../../io/mats3/MatsFactory.html" title="interface in io.mats3"><code>MatsFactory</code></a> bean will have their <a href="../../../io/mats3/MatsFactory.html#holdEndpointsUntilFactoryIsStarted--"><code>MatsFactory.holdEndpointsUntilFactoryIsStarted()</code></a> method
 invoked.</li>
 <li>Each bean which will have all their methods searched for the relevant annotations. Such annotated methods will be
 put in a list.</li>
 </ol>
 </li>
 <li>Upon <code>ContextRefreshedEvent</code>:
 <ol>
 <li>All definitions that was put in the list will be processed, and Mats Endpoints will be registered into the
 MatsFactory - using the specified MatsFactory if this was qualified in the definition (Read more at
 <a href="../../../io/mats3/spring/MatsMapping.html" title="annotation in io.mats3.spring"><code>@MatsMapping</code></a>).</li>
 <li>Then, all MatsFactories present in the ApplicationContext will have their <a href="../../../io/mats3/MatsFactory.html#start--"><code>MatsFactory.start()</code></a> method
 invoked, which will "release" the configured Mats endpoints, so that they will start (which in turn fires up their
 "stage processor" threads, which will each go and get a connection to the underlying MQ (which probably is JMS-based)
 and start to listen for messages).</li>
 </ol>
 </li>
 </ol>
 Do notice that <i>all</i> MatsFactories in the Spring ApplicationContext are started, regardless of whether they had
 any Mats endpoints registered using the Mats SpringConfig. This implies that if you register any Mats endpoints
 programmatically using e.g. <code>@PostConstruct</code> or similar functionality, these will also be started.
 <p />
 <h3>This is the shutdown procedure:</h3>
 <ol>
 <li>Upon <code>ContextClosedEvent</code>, all MatsFactories in the ApplicationContext will have their
 <a href="../../../io/mats3/MatsFactory.html#stop-int-"><code>stop()</code></a> method invoked.
 <li>This causes all registered Mats Endpoints to be <a href="../../../io/mats3/MatsEndpoint.html#stop-int-"><code>stopped</code></a>, which releases the
 connection to the underlying MQ and stops the stage processor threads.
 </ol>
 Notice: ContextClosedEvent is fired rather early in the Spring ApplicationContext shutdown procedure. When running in
 integration testing mode, which typically will involve starting an in-vm ActiveMQ in the same JVM as the endpoints,
 this early stopping and releasing of connections is beneficial so that when the in-vm ActiveMQ is stopped somewhat
 later, one won't get a load of connection failures from the Mats endpoints which otherwise would have their
 connections shut down under their feet.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../io/mats3/spring/MatsSpringAnnotationRegistration.MatsSpringConfigException.html" title="class in io.mats3.spring">MatsSpringAnnotationRegistration.MatsSpringConfigException</a></span></code>
<div class="block">Thrown if the setup of a Mats Spring endpoint fails.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../io/mats3/spring/MatsSpringAnnotationRegistration.MatsSpringInvocationTargetException.html" title="class in io.mats3.spring">MatsSpringAnnotationRegistration.MatsSpringInvocationTargetException</a></span></code>
<div class="block">Thrown if the invocation of a <a href="../../../io/mats3/spring/MatsMapping.html" title="annotation in io.mats3.spring"><code>@MatsMapping</code></a> or <a href="../../../io/mats3/spring/MatsEndpointSetup.html" title="annotation in io.mats3.spring"><code>@MatsEndpointSetup</code></a>
 annotated method raises <code>InvocationTargetException</code> and the underlying exception is not a
 <code>RuntimeException</code>.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../io/mats3/spring/MatsSpringAnnotationRegistration.html#MatsSpringAnnotationRegistration--">MatsSpringAnnotationRegistration</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../io/mats3/spring/MatsSpringAnnotationRegistration.html#onContextClosedEvent-org.springframework.context.event.ContextClosedEvent-">onContextClosedEvent</a></span>(org.springframework.context.event.ContextClosedEvent&nbsp;e)</code>
<div class="block"><code>ContextClosedEvent</code> runs pretty much as the first step in the Spring life cycle <b>stopping</b> process:
 Stop the MatsFactory, which will stop all MATS Endpoints, which will have them release their JMS resources - and
 then the MatsFactory will clean out the JmsMatsJmsSessionHandler.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../io/mats3/spring/MatsSpringAnnotationRegistration.html#onContextRefreshedEvent-org.springframework.context.event.ContextRefreshedEvent-">onContextRefreshedEvent</a></span>(org.springframework.context.event.ContextRefreshedEvent&nbsp;e)</code>
<div class="block"><code>ContextRefreshedEvent</code> runs pretty much as the latest step in the Spring life cycle starting process:
 Processes all <a href="../../../io/mats3/spring/MatsMapping.html" title="annotation in io.mats3.spring"><code>MatsMapping</code></a> and <a href="../../../io/mats3/spring/MatsEndpointSetup.html" title="annotation in io.mats3.spring"><code>MatsEndpointSetup</code></a> annotations, then starts the MatsFactory, which
 will start any "hanging" MATS Endpoints, which will then start consuming messages.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../io/mats3/spring/MatsSpringAnnotationRegistration.html#postProcessAfterInitialization-java.lang.Object-java.lang.String-">postProcessAfterInitialization</a></span>(java.lang.Object&nbsp;bean,
                              java.lang.String&nbsp;beanName)</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../io/mats3/spring/MatsSpringAnnotationRegistration.html#postProcessBeforeInitialization-java.lang.Object-java.lang.String-">postProcessBeforeInitialization</a></span>(java.lang.Object&nbsp;bean,
                               java.lang.String&nbsp;beanName)</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../io/mats3/spring/MatsSpringAnnotationRegistration.html#setApplicationContext-org.springframework.context.ApplicationContext-">setApplicationContext</a></span>(org.springframework.context.ApplicationContext&nbsp;applicationContext)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="MatsSpringAnnotationRegistration--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MatsSpringAnnotationRegistration</h4>
<pre>public&nbsp;MatsSpringAnnotationRegistration()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setApplicationContext-org.springframework.context.ApplicationContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setApplicationContext</h4>
<pre>public&nbsp;void&nbsp;setApplicationContext(org.springframework.context.ApplicationContext&nbsp;applicationContext)
                           throws org.springframework.beans.BeansException</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>setApplicationContext</code>&nbsp;in interface&nbsp;<code>org.springframework.context.ApplicationContextAware</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>org.springframework.beans.BeansException</code></dd>
</dl>
</li>
</ul>
<a name="postProcessBeforeInitialization-java.lang.Object-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>postProcessBeforeInitialization</h4>
<pre>public&nbsp;java.lang.Object&nbsp;postProcessBeforeInitialization(java.lang.Object&nbsp;bean,
                                                        java.lang.String&nbsp;beanName)
                                                 throws org.springframework.beans.BeansException</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>postProcessBeforeInitialization</code>&nbsp;in interface&nbsp;<code>org.springframework.beans.factory.config.BeanPostProcessor</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>org.springframework.beans.BeansException</code></dd>
</dl>
</li>
</ul>
<a name="postProcessAfterInitialization-java.lang.Object-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>postProcessAfterInitialization</h4>
<pre>public&nbsp;java.lang.Object&nbsp;postProcessAfterInitialization(java.lang.Object&nbsp;bean,
                                                       java.lang.String&nbsp;beanName)
                                                throws org.springframework.beans.BeansException</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>postProcessAfterInitialization</code>&nbsp;in interface&nbsp;<code>org.springframework.beans.factory.config.BeanPostProcessor</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>org.springframework.beans.BeansException</code></dd>
</dl>
</li>
</ul>
<a name="onContextRefreshedEvent-org.springframework.context.event.ContextRefreshedEvent-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onContextRefreshedEvent</h4>
<pre>@EventListener
public&nbsp;void&nbsp;onContextRefreshedEvent(org.springframework.context.event.ContextRefreshedEvent&nbsp;e)</pre>
<div class="block"><code>ContextRefreshedEvent</code> runs pretty much as the latest step in the Spring life cycle starting process:
 Processes all <a href="../../../io/mats3/spring/MatsMapping.html" title="annotation in io.mats3.spring"><code>MatsMapping</code></a> and <a href="../../../io/mats3/spring/MatsEndpointSetup.html" title="annotation in io.mats3.spring"><code>MatsEndpointSetup</code></a> annotations, then starts the MatsFactory, which
 will start any "hanging" MATS Endpoints, which will then start consuming messages.</div>
</li>
</ul>
<a name="onContextClosedEvent-org.springframework.context.event.ContextClosedEvent-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>onContextClosedEvent</h4>
<pre>@EventListener
public&nbsp;void&nbsp;onContextClosedEvent(org.springframework.context.event.ContextClosedEvent&nbsp;e)</pre>
<div class="block"><code>ContextClosedEvent</code> runs pretty much as the first step in the Spring life cycle <b>stopping</b> process:
 Stop the MatsFactory, which will stop all MATS Endpoints, which will have them release their JMS resources - and
 then the MatsFactory will clean out the JmsMatsJmsSessionHandler.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../io/mats3/spring/MatsMapping.MatsMappings.html" title="annotation in io.mats3.spring"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../io/mats3/spring/MatsSpringAnnotationRegistration.MatsSpringConfigException.html" title="class in io.mats3.spring"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?io/mats3/spring/MatsSpringAnnotationRegistration.html" target="_top">Frames</a></li>
<li><a href="MatsSpringAnnotationRegistration.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
